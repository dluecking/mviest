Building DAG of jobs...
Using shell: /bin/bash
Provided cluster nodes: 32
Job stats:
job                                        count    min threads    max threads
---------------------------------------  -------  -------------  -------------
DeepVirFinder                                 10              1              1
all                                            1              1              1
checkv                                        10              1              1
contig_selector                               10              1              1
contig_summary                                10              1              1
count_virome_contigs                          10              1              1
filter_input_virome_by_length                 10              1              1
kaiju_mvome                                   10              1              1
kaiju_virome                                  10              1              1
map_mv_positive_reads_to_metagenome           10              1              1
map_virome_reads_to_mv_contigs                10              1              1
map_virome_reads_to_true_virome_contigs       10              1              1
mviest_plot                                   10              1              1
platon                                        10              1              1
viromeQC_mvome                                10              1              1
viromeQC_virome                               10              1              1
vs2                                           10              1              1
vs2_summary                                   10              1              1
total                                        171              1              1

Select jobs to execute...

[Fri Nov  4 13:19:24 2022]
localrule filter_input_virome_by_length:
    input: results/45_SRF/contigs/virome.contigs.fasta
    output: results/45_SRF/contigs/virome.contigs.filtered.fasta
    jobid: 23
    reason: Missing output files: results/45_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=45_SRF
    resources: tmpdir=/tmp


        python3 scripts/filter_by_len.py results/45_SRF/contigs/virome.contigs.fasta         2000 > results/45_SRF/contigs/virome.contigs.filtered.fasta
        
Activating conda environment: /home/dlueckin/envs/f57ba2b792805d07331ad6f4d9adf21c

[Fri Nov  4 13:19:24 2022]
localrule filter_input_virome_by_length:
    input: results/42_SRF/contigs/virome.contigs.fasta
    output: results/42_SRF/contigs/virome.contigs.filtered.fasta
    jobid: 6
    reason: Missing output files: results/42_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=42_SRF
    resources: tmpdir=/tmp


        python3 scripts/filter_by_len.py results/42_SRF/contigs/virome.contigs.fasta         2000 > results/42_SRF/contigs/virome.contigs.filtered.fasta
        
Activating conda environment: /home/dlueckin/envs/f57ba2b792805d07331ad6f4d9adf21c

[Fri Nov  4 13:19:24 2022]
localrule filter_input_virome_by_length:
    input: results/46_SRF/contigs/virome.contigs.fasta
    output: results/46_SRF/contigs/virome.contigs.filtered.fasta
    jobid: 40
    reason: Missing output files: results/46_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=46_SRF
    resources: tmpdir=/tmp


        python3 scripts/filter_by_len.py results/46_SRF/contigs/virome.contigs.fasta         2000 > results/46_SRF/contigs/virome.contigs.filtered.fasta
        
Activating conda environment: /home/dlueckin/envs/f57ba2b792805d07331ad6f4d9adf21c

[Fri Nov  4 13:19:24 2022]
localrule filter_input_virome_by_length:
    input: results/58_DCM/contigs/virome.contigs.fasta
    output: results/58_DCM/contigs/virome.contigs.filtered.fasta
    jobid: 142
    reason: Missing output files: results/58_DCM/contigs/virome.contigs.filtered.fasta
    wildcards: sample=58_DCM
    resources: tmpdir=/tmp


        python3 scripts/filter_by_len.py results/58_DCM/contigs/virome.contigs.fasta         2000 > results/58_DCM/contigs/virome.contigs.filtered.fasta
        
Activating conda environment: /home/dlueckin/envs/f57ba2b792805d07331ad6f4d9adf21c

[Fri Nov  4 13:19:24 2022]
localrule filter_input_virome_by_length:
    input: results/62_SRF/contigs/virome.contigs.fasta
    output: results/62_SRF/contigs/virome.contigs.filtered.fasta
    jobid: 159
    reason: Missing output files: results/62_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=62_SRF
    resources: tmpdir=/tmp


        python3 scripts/filter_by_len.py results/62_SRF/contigs/virome.contigs.fasta         2000 > results/62_SRF/contigs/virome.contigs.filtered.fasta
        
Activating conda environment: /home/dlueckin/envs/f57ba2b792805d07331ad6f4d9adf21c

[Fri Nov  4 13:19:24 2022]
localrule filter_input_virome_by_length:
    input: results/52_SRF/contigs/virome.contigs.fasta
    output: results/52_SRF/contigs/virome.contigs.filtered.fasta
    jobid: 91
    reason: Missing output files: results/52_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=52_SRF
    resources: tmpdir=/tmp


        python3 scripts/filter_by_len.py results/52_SRF/contigs/virome.contigs.fasta         2000 > results/52_SRF/contigs/virome.contigs.filtered.fasta
        
Activating conda environment: /home/dlueckin/envs/f57ba2b792805d07331ad6f4d9adf21c

[Fri Nov  4 13:19:24 2022]
localrule filter_input_virome_by_length:
    input: results/48_SRF/contigs/virome.contigs.fasta
    output: results/48_SRF/contigs/virome.contigs.filtered.fasta
    jobid: 57
    reason: Missing output files: results/48_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=48_SRF
    resources: tmpdir=/tmp


        python3 scripts/filter_by_len.py results/48_SRF/contigs/virome.contigs.fasta         2000 > results/48_SRF/contigs/virome.contigs.filtered.fasta
        
Activating conda environment: /home/dlueckin/envs/f57ba2b792805d07331ad6f4d9adf21c

[Fri Nov  4 13:19:24 2022]
localrule filter_input_virome_by_length:
    input: results/52_DCM/contigs/virome.contigs.fasta
    output: results/52_DCM/contigs/virome.contigs.filtered.fasta
    jobid: 74
    reason: Missing output files: results/52_DCM/contigs/virome.contigs.filtered.fasta
    wildcards: sample=52_DCM
    resources: tmpdir=/tmp


        python3 scripts/filter_by_len.py results/52_DCM/contigs/virome.contigs.fasta         2000 > results/52_DCM/contigs/virome.contigs.filtered.fasta
        
Activating conda environment: /home/dlueckin/envs/f57ba2b792805d07331ad6f4d9adf21c

[Fri Nov  4 13:19:24 2022]
localrule filter_input_virome_by_length:
    input: results/56_MES/contigs/virome.contigs.fasta
    output: results/56_MES/contigs/virome.contigs.filtered.fasta
    jobid: 108
    reason: Missing output files: results/56_MES/contigs/virome.contigs.filtered.fasta
    wildcards: sample=56_MES
    resources: tmpdir=/tmp


        python3 scripts/filter_by_len.py results/56_MES/contigs/virome.contigs.fasta         2000 > results/56_MES/contigs/virome.contigs.filtered.fasta
        
Activating conda environment: /home/dlueckin/envs/f57ba2b792805d07331ad6f4d9adf21c

[Fri Nov  4 13:19:24 2022]
localrule filter_input_virome_by_length:
    input: results/56_SRF/contigs/virome.contigs.fasta
    output: results/56_SRF/contigs/virome.contigs.filtered.fasta
    jobid: 125
    reason: Missing output files: results/56_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=56_SRF
    resources: tmpdir=/tmp


        python3 scripts/filter_by_len.py results/56_SRF/contigs/virome.contigs.fasta         2000 > results/56_SRF/contigs/virome.contigs.filtered.fasta
        
Activating conda environment: /home/dlueckin/envs/f57ba2b792805d07331ad6f4d9adf21c
[Fri Nov  4 13:19:43 2022]
Finished job 57.
1 of 171 steps (1%) done
Select jobs to execute...

[Fri Nov  4 13:19:43 2022]
localrule count_virome_contigs:
    input: results/48_SRF/contigs/virome.contigs.filtered.fasta
    output: results/48_SRF/enough_filtered_virome_contigs.txt
    jobid: 60
    reason: Missing output files: results/48_SRF/enough_filtered_virome_contigs.txt; Input files updated by another job: results/48_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=48_SRF
    resources: tmpdir=/tmp


        n=$(grep '>' results/48_SRF/contigs/virome.contigs.filtered.fasta  | wc -l)
        if [[ $n -ge 1 ]]
        then
            touch results/48_SRF/enough_filtered_virome_contigs.txt
        else
            touch results/48_SRF/NOT_enough_filtered_virome_contigs.txt
        fi
        
[Fri Nov  4 13:19:45 2022]
Finished job 40.
2 of 171 steps (1%) done
Select jobs to execute...

[Fri Nov  4 13:19:45 2022]
localrule count_virome_contigs:
    input: results/46_SRF/contigs/virome.contigs.filtered.fasta
    output: results/46_SRF/enough_filtered_virome_contigs.txt
    jobid: 43
    reason: Missing output files: results/46_SRF/enough_filtered_virome_contigs.txt; Input files updated by another job: results/46_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=46_SRF
    resources: tmpdir=/tmp


        n=$(grep '>' results/46_SRF/contigs/virome.contigs.filtered.fasta  | wc -l)
        if [[ $n -ge 1 ]]
        then
            touch results/46_SRF/enough_filtered_virome_contigs.txt
        else
            touch results/46_SRF/NOT_enough_filtered_virome_contigs.txt
        fi
        
[Fri Nov  4 13:19:46 2022]
Finished job 91.
3 of 171 steps (2%) done
Select jobs to execute...

[Fri Nov  4 13:19:46 2022]
localrule count_virome_contigs:
    input: results/52_SRF/contigs/virome.contigs.filtered.fasta
    output: results/52_SRF/enough_filtered_virome_contigs.txt
    jobid: 94
    reason: Missing output files: results/52_SRF/enough_filtered_virome_contigs.txt; Input files updated by another job: results/52_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=52_SRF
    resources: tmpdir=/tmp


        n=$(grep '>' results/52_SRF/contigs/virome.contigs.filtered.fasta  | wc -l)
        if [[ $n -ge 1 ]]
        then
            touch results/52_SRF/enough_filtered_virome_contigs.txt
        else
            touch results/52_SRF/NOT_enough_filtered_virome_contigs.txt
        fi
        
[Fri Nov  4 13:19:48 2022]
Finished job 74.
4 of 171 steps (2%) done
Select jobs to execute...

[Fri Nov  4 13:19:48 2022]
localrule count_virome_contigs:
    input: results/52_DCM/contigs/virome.contigs.filtered.fasta
    output: results/52_DCM/enough_filtered_virome_contigs.txt
    jobid: 77
    reason: Missing output files: results/52_DCM/enough_filtered_virome_contigs.txt; Input files updated by another job: results/52_DCM/contigs/virome.contigs.filtered.fasta
    wildcards: sample=52_DCM
    resources: tmpdir=/tmp


        n=$(grep '>' results/52_DCM/contigs/virome.contigs.filtered.fasta  | wc -l)
        if [[ $n -ge 1 ]]
        then
            touch results/52_DCM/enough_filtered_virome_contigs.txt
        else
            touch results/52_DCM/NOT_enough_filtered_virome_contigs.txt
        fi
        
[Fri Nov  4 13:19:49 2022]
Finished job 23.
5 of 171 steps (3%) done
[Fri Nov  4 13:19:50 2022]
Finished job 142.
6 of 171 steps (4%) done
[Fri Nov  4 13:19:51 2022]
Finished job 6.
7 of 171 steps (4%) done
Select jobs to execute...

[Fri Nov  4 13:19:52 2022]
localrule count_virome_contigs:
    input: results/45_SRF/contigs/virome.contigs.filtered.fasta
    output: results/45_SRF/enough_filtered_virome_contigs.txt
    jobid: 26
    reason: Missing output files: results/45_SRF/enough_filtered_virome_contigs.txt; Input files updated by another job: results/45_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=45_SRF
    resources: tmpdir=/tmp


        n=$(grep '>' results/45_SRF/contigs/virome.contigs.filtered.fasta  | wc -l)
        if [[ $n -ge 1 ]]
        then
            touch results/45_SRF/enough_filtered_virome_contigs.txt
        else
            touch results/45_SRF/NOT_enough_filtered_virome_contigs.txt
        fi
        

[Fri Nov  4 13:19:52 2022]
localrule count_virome_contigs:
    input: results/58_DCM/contigs/virome.contigs.filtered.fasta
    output: results/58_DCM/enough_filtered_virome_contigs.txt
    jobid: 145
    reason: Missing output files: results/58_DCM/enough_filtered_virome_contigs.txt; Input files updated by another job: results/58_DCM/contigs/virome.contigs.filtered.fasta
    wildcards: sample=58_DCM
    resources: tmpdir=/tmp


        n=$(grep '>' results/58_DCM/contigs/virome.contigs.filtered.fasta  | wc -l)
        if [[ $n -ge 1 ]]
        then
            touch results/58_DCM/enough_filtered_virome_contigs.txt
        else
            touch results/58_DCM/NOT_enough_filtered_virome_contigs.txt
        fi
        

[Fri Nov  4 13:19:53 2022]
localrule count_virome_contigs:
    input: results/42_SRF/contigs/virome.contigs.filtered.fasta
    output: results/42_SRF/enough_filtered_virome_contigs.txt
    jobid: 9
    reason: Missing output files: results/42_SRF/enough_filtered_virome_contigs.txt; Input files updated by another job: results/42_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=42_SRF
    resources: tmpdir=/tmp


        n=$(grep '>' results/42_SRF/contigs/virome.contigs.filtered.fasta  | wc -l)
        if [[ $n -ge 1 ]]
        then
            touch results/42_SRF/enough_filtered_virome_contigs.txt
        else
            touch results/42_SRF/NOT_enough_filtered_virome_contigs.txt
        fi
        
[Fri Nov  4 13:19:54 2022]
Finished job 159.
8 of 171 steps (5%) done
[Fri Nov  4 13:19:55 2022]
Finished job 60.
9 of 171 steps (5%) done
[Fri Nov  4 13:19:55 2022]
Finished job 125.
10 of 171 steps (6%) done
Select jobs to execute...

[Fri Nov  4 13:19:56 2022]
localrule count_virome_contigs:
    input: results/56_SRF/contigs/virome.contigs.filtered.fasta
    output: results/56_SRF/enough_filtered_virome_contigs.txt
    jobid: 128
    reason: Missing output files: results/56_SRF/enough_filtered_virome_contigs.txt; Input files updated by another job: results/56_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=56_SRF
    resources: tmpdir=/tmp


        n=$(grep '>' results/56_SRF/contigs/virome.contigs.filtered.fasta  | wc -l)
        if [[ $n -ge 1 ]]
        then
            touch results/56_SRF/enough_filtered_virome_contigs.txt
        else
            touch results/56_SRF/NOT_enough_filtered_virome_contigs.txt
        fi
        

[Fri Nov  4 13:19:56 2022]
localrule count_virome_contigs:
    input: results/62_SRF/contigs/virome.contigs.filtered.fasta
    output: results/62_SRF/enough_filtered_virome_contigs.txt
    jobid: 162
    reason: Missing output files: results/62_SRF/enough_filtered_virome_contigs.txt; Input files updated by another job: results/62_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=62_SRF
    resources: tmpdir=/tmp


        n=$(grep '>' results/62_SRF/contigs/virome.contigs.filtered.fasta  | wc -l)
        if [[ $n -ge 1 ]]
        then
            touch results/62_SRF/enough_filtered_virome_contigs.txt
        else
            touch results/62_SRF/NOT_enough_filtered_virome_contigs.txt
        fi
        

[Fri Nov  4 13:19:57 2022]
rule vs2:
    input: results/48_SRF/contigs/virome.contigs.filtered.fasta, results/48_SRF/enough_filtered_virome_contigs.txt
    output: results/48_SRF/vs2/final-viral-combined.fa, results/48_SRF/vs2/final-viral-score.tsv
    jobid: 59
    reason: Missing output files: results/48_SRF/vs2/final-viral-combined.fa, results/48_SRF/vs2/final-viral-score.tsv; Input files updated by another job: results/48_SRF/contigs/virome.contigs.filtered.fasta, results/48_SRF/enough_filtered_virome_contigs.txt
    wildcards: sample=48_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        virsorter run --keep-original-seq -i results/48_SRF/contigs/virome.contigs.filtered.fasta         -w results/48_SRF/vs2         --min-score 0.5 -j 8 all --db-dir /home/dlueckin/dbs/vs2/db/
        
Submitted job 59 with external jobid 'Submitted batch job 34683'.

[Fri Nov  4 13:19:57 2022]
rule platon:
    input: results/48_SRF/contigs/virome.contigs.filtered.fasta, results/48_SRF/enough_filtered_virome_contigs.txt
    output: results/48_SRF/platon_out/platon_plasmids.log
    jobid: 63
    reason: Missing output files: results/48_SRF/platon_out/platon_plasmids.log; Input files updated by another job: results/48_SRF/contigs/virome.contigs.filtered.fasta, results/48_SRF/enough_filtered_virome_contigs.txt
    wildcards: sample=48_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        platon --db /home/dlueckin/dbs/platon_db/db/ --prefix platon_plasmids         --output results/48_SRF/platon_out/         --threads 8         results/48_SRF/contigs/virome.contigs.filtered.fasta
        
Submitted job 63 with external jobid 'Submitted batch job 34684'.

[Fri Nov  4 13:19:58 2022]
rule DeepVirFinder:
    input: results/48_SRF/contigs/virome.contigs.filtered.fasta, results/48_SRF/enough_filtered_virome_contigs.txt
    output: results/48_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt
    jobid: 62
    reason: Missing output files: results/48_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt; Input files updated by another job: results/48_SRF/contigs/virome.contigs.filtered.fasta, results/48_SRF/enough_filtered_virome_contigs.txt
    wildcards: sample=48_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        python /home/dlueckin/bin/DeepVirFinder/dvf.py         -i results/48_SRF/contigs/virome.contigs.filtered.fasta         -o results/48_SRF/dvf -c 8
        
Submitted job 62 with external jobid 'Submitted batch job 34685'.
[Fri Nov  4 13:19:59 2022]
Finished job 43.
11 of 171 steps (6%) done
[Fri Nov  4 13:20:00 2022]
Finished job 94.
12 of 171 steps (7%) done
[Fri Nov  4 13:20:00 2022]
Finished job 77.
13 of 171 steps (8%) done
[Fri Nov  4 13:20:00 2022]
Finished job 108.
14 of 171 steps (8%) done
Select jobs to execute...

[Fri Nov  4 13:20:00 2022]
localrule count_virome_contigs:
    input: results/56_MES/contigs/virome.contigs.filtered.fasta
    output: results/56_MES/enough_filtered_virome_contigs.txt
    jobid: 111
    reason: Missing output files: results/56_MES/enough_filtered_virome_contigs.txt; Input files updated by another job: results/56_MES/contigs/virome.contigs.filtered.fasta
    wildcards: sample=56_MES
    resources: tmpdir=/tmp


        n=$(grep '>' results/56_MES/contigs/virome.contigs.filtered.fasta  | wc -l)
        if [[ $n -ge 1 ]]
        then
            touch results/56_MES/enough_filtered_virome_contigs.txt
        else
            touch results/56_MES/NOT_enough_filtered_virome_contigs.txt
        fi
        

[Fri Nov  4 13:20:00 2022]
rule vs2:
    input: results/52_SRF/contigs/virome.contigs.filtered.fasta, results/52_SRF/enough_filtered_virome_contigs.txt
    output: results/52_SRF/vs2/final-viral-combined.fa, results/52_SRF/vs2/final-viral-score.tsv
    jobid: 93
    reason: Missing output files: results/52_SRF/vs2/final-viral-combined.fa, results/52_SRF/vs2/final-viral-score.tsv; Input files updated by another job: results/52_SRF/contigs/virome.contigs.filtered.fasta, results/52_SRF/enough_filtered_virome_contigs.txt
    wildcards: sample=52_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        virsorter run --keep-original-seq -i results/52_SRF/contigs/virome.contigs.filtered.fasta         -w results/52_SRF/vs2         --min-score 0.5 -j 8 all --db-dir /home/dlueckin/dbs/vs2/db/
        
Submitted job 93 with external jobid 'Submitted batch job 34686'.

[Fri Nov  4 13:20:01 2022]
rule vs2:
    input: results/52_DCM/contigs/virome.contigs.filtered.fasta, results/52_DCM/enough_filtered_virome_contigs.txt
    output: results/52_DCM/vs2/final-viral-combined.fa, results/52_DCM/vs2/final-viral-score.tsv
    jobid: 76
    reason: Missing output files: results/52_DCM/vs2/final-viral-combined.fa, results/52_DCM/vs2/final-viral-score.tsv; Input files updated by another job: results/52_DCM/enough_filtered_virome_contigs.txt, results/52_DCM/contigs/virome.contigs.filtered.fasta
    wildcards: sample=52_DCM
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        virsorter run --keep-original-seq -i results/52_DCM/contigs/virome.contigs.filtered.fasta         -w results/52_DCM/vs2         --min-score 0.5 -j 8 all --db-dir /home/dlueckin/dbs/vs2/db/
        
Submitted job 76 with external jobid 'Submitted batch job 34687'.

[Fri Nov  4 13:20:01 2022]
rule vs2:
    input: results/46_SRF/contigs/virome.contigs.filtered.fasta, results/46_SRF/enough_filtered_virome_contigs.txt
    output: results/46_SRF/vs2/final-viral-combined.fa, results/46_SRF/vs2/final-viral-score.tsv
    jobid: 42
    reason: Missing output files: results/46_SRF/vs2/final-viral-score.tsv, results/46_SRF/vs2/final-viral-combined.fa; Input files updated by another job: results/46_SRF/contigs/virome.contigs.filtered.fasta, results/46_SRF/enough_filtered_virome_contigs.txt
    wildcards: sample=46_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        virsorter run --keep-original-seq -i results/46_SRF/contigs/virome.contigs.filtered.fasta         -w results/46_SRF/vs2         --min-score 0.5 -j 8 all --db-dir /home/dlueckin/dbs/vs2/db/
        
Submitted job 42 with external jobid 'Submitted batch job 34688'.

[Fri Nov  4 13:20:02 2022]
rule DeepVirFinder:
    input: results/46_SRF/contigs/virome.contigs.filtered.fasta, results/46_SRF/enough_filtered_virome_contigs.txt
    output: results/46_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt
    jobid: 45
    reason: Missing output files: results/46_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt; Input files updated by another job: results/46_SRF/contigs/virome.contigs.filtered.fasta, results/46_SRF/enough_filtered_virome_contigs.txt
    wildcards: sample=46_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        python /home/dlueckin/bin/DeepVirFinder/dvf.py         -i results/46_SRF/contigs/virome.contigs.filtered.fasta         -o results/46_SRF/dvf -c 8
        
Submitted job 45 with external jobid 'Submitted batch job 34689'.

[Fri Nov  4 13:20:02 2022]
rule platon:
    input: results/46_SRF/contigs/virome.contigs.filtered.fasta, results/46_SRF/enough_filtered_virome_contigs.txt
    output: results/46_SRF/platon_out/platon_plasmids.log
    jobid: 46
    reason: Missing output files: results/46_SRF/platon_out/platon_plasmids.log; Input files updated by another job: results/46_SRF/contigs/virome.contigs.filtered.fasta, results/46_SRF/enough_filtered_virome_contigs.txt
    wildcards: sample=46_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        platon --db /home/dlueckin/dbs/platon_db/db/ --prefix platon_plasmids         --output results/46_SRF/platon_out/         --threads 8         results/46_SRF/contigs/virome.contigs.filtered.fasta
        
Submitted job 46 with external jobid 'Submitted batch job 34690'.

[Fri Nov  4 13:20:02 2022]
rule DeepVirFinder:
    input: results/52_SRF/contigs/virome.contigs.filtered.fasta, results/52_SRF/enough_filtered_virome_contigs.txt
    output: results/52_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt
    jobid: 96
    reason: Missing output files: results/52_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt; Input files updated by another job: results/52_SRF/contigs/virome.contigs.filtered.fasta, results/52_SRF/enough_filtered_virome_contigs.txt
    wildcards: sample=52_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        python /home/dlueckin/bin/DeepVirFinder/dvf.py         -i results/52_SRF/contigs/virome.contigs.filtered.fasta         -o results/52_SRF/dvf -c 8
        
Submitted job 96 with external jobid 'Submitted batch job 34691'.

[Fri Nov  4 13:20:03 2022]
rule platon:
    input: results/52_SRF/contigs/virome.contigs.filtered.fasta, results/52_SRF/enough_filtered_virome_contigs.txt
    output: results/52_SRF/platon_out/platon_plasmids.log
    jobid: 97
    reason: Missing output files: results/52_SRF/platon_out/platon_plasmids.log; Input files updated by another job: results/52_SRF/contigs/virome.contigs.filtered.fasta, results/52_SRF/enough_filtered_virome_contigs.txt
    wildcards: sample=52_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        platon --db /home/dlueckin/dbs/platon_db/db/ --prefix platon_plasmids         --output results/52_SRF/platon_out/         --threads 8         results/52_SRF/contigs/virome.contigs.filtered.fasta
        
Submitted job 97 with external jobid 'Submitted batch job 34692'.

[Fri Nov  4 13:20:03 2022]
rule DeepVirFinder:
    input: results/52_DCM/contigs/virome.contigs.filtered.fasta, results/52_DCM/enough_filtered_virome_contigs.txt
    output: results/52_DCM/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt
    jobid: 79
    reason: Missing output files: results/52_DCM/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt; Input files updated by another job: results/52_DCM/enough_filtered_virome_contigs.txt, results/52_DCM/contigs/virome.contigs.filtered.fasta
    wildcards: sample=52_DCM
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        python /home/dlueckin/bin/DeepVirFinder/dvf.py         -i results/52_DCM/contigs/virome.contigs.filtered.fasta         -o results/52_DCM/dvf -c 8
        
Submitted job 79 with external jobid 'Submitted batch job 34693'.

[Fri Nov  4 13:20:03 2022]
rule platon:
    input: results/52_DCM/contigs/virome.contigs.filtered.fasta, results/52_DCM/enough_filtered_virome_contigs.txt
    output: results/52_DCM/platon_out/platon_plasmids.log
    jobid: 80
    reason: Missing output files: results/52_DCM/platon_out/platon_plasmids.log; Input files updated by another job: results/52_DCM/enough_filtered_virome_contigs.txt, results/52_DCM/contigs/virome.contigs.filtered.fasta
    wildcards: sample=52_DCM
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        platon --db /home/dlueckin/dbs/platon_db/db/ --prefix platon_plasmids         --output results/52_DCM/platon_out/         --threads 8         results/52_DCM/contigs/virome.contigs.filtered.fasta
        
Submitted job 80 with external jobid 'Submitted batch job 34694'.
[Fri Nov  4 13:20:03 2022]
Finished job 26.
15 of 171 steps (9%) done
[Fri Nov  4 13:20:03 2022]
Finished job 145.
16 of 171 steps (9%) done
[Fri Nov  4 13:20:03 2022]
Finished job 9.
17 of 171 steps (10%) done
[Fri Nov  4 13:20:03 2022]
Finished job 162.
18 of 171 steps (11%) done
[Fri Nov  4 13:20:03 2022]
Finished job 128.
19 of 171 steps (11%) done
Select jobs to execute...

[Fri Nov  4 13:20:03 2022]
rule vs2:
    input: results/58_DCM/contigs/virome.contigs.filtered.fasta, results/58_DCM/enough_filtered_virome_contigs.txt
    output: results/58_DCM/vs2/final-viral-combined.fa, results/58_DCM/vs2/final-viral-score.tsv
    jobid: 144
    reason: Missing output files: results/58_DCM/vs2/final-viral-score.tsv, results/58_DCM/vs2/final-viral-combined.fa; Input files updated by another job: results/58_DCM/enough_filtered_virome_contigs.txt, results/58_DCM/contigs/virome.contigs.filtered.fasta
    wildcards: sample=58_DCM
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        virsorter run --keep-original-seq -i results/58_DCM/contigs/virome.contigs.filtered.fasta         -w results/58_DCM/vs2         --min-score 0.5 -j 8 all --db-dir /home/dlueckin/dbs/vs2/db/
        
Submitted job 144 with external jobid 'Submitted batch job 34695'.

[Fri Nov  4 13:20:04 2022]
rule DeepVirFinder:
    input: results/42_SRF/contigs/virome.contigs.filtered.fasta, results/42_SRF/enough_filtered_virome_contigs.txt
    output: results/42_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt
    jobid: 11
    reason: Missing output files: results/42_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt; Input files updated by another job: results/42_SRF/enough_filtered_virome_contigs.txt, results/42_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=42_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        python /home/dlueckin/bin/DeepVirFinder/dvf.py         -i results/42_SRF/contigs/virome.contigs.filtered.fasta         -o results/42_SRF/dvf -c 8
        
Submitted job 11 with external jobid 'Submitted batch job 34696'.

[Fri Nov  4 13:20:04 2022]
rule DeepVirFinder:
    input: results/45_SRF/contigs/virome.contigs.filtered.fasta, results/45_SRF/enough_filtered_virome_contigs.txt
    output: results/45_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt
    jobid: 28
    reason: Missing output files: results/45_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt; Input files updated by another job: results/45_SRF/enough_filtered_virome_contigs.txt, results/45_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=45_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        python /home/dlueckin/bin/DeepVirFinder/dvf.py         -i results/45_SRF/contigs/virome.contigs.filtered.fasta         -o results/45_SRF/dvf -c 8
        
Submitted job 28 with external jobid 'Submitted batch job 34697'.

[Fri Nov  4 13:20:04 2022]
rule vs2:
    input: results/45_SRF/contigs/virome.contigs.filtered.fasta, results/45_SRF/enough_filtered_virome_contigs.txt
    output: results/45_SRF/vs2/final-viral-combined.fa, results/45_SRF/vs2/final-viral-score.tsv
    jobid: 25
    reason: Missing output files: results/45_SRF/vs2/final-viral-score.tsv, results/45_SRF/vs2/final-viral-combined.fa; Input files updated by another job: results/45_SRF/enough_filtered_virome_contigs.txt, results/45_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=45_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        virsorter run --keep-original-seq -i results/45_SRF/contigs/virome.contigs.filtered.fasta         -w results/45_SRF/vs2         --min-score 0.5 -j 8 all --db-dir /home/dlueckin/dbs/vs2/db/
        
Submitted job 25 with external jobid 'Submitted batch job 34698'.

[Fri Nov  4 13:20:04 2022]
rule platon:
    input: results/58_DCM/contigs/virome.contigs.filtered.fasta, results/58_DCM/enough_filtered_virome_contigs.txt
    output: results/58_DCM/platon_out/platon_plasmids.log
    jobid: 148
    reason: Missing output files: results/58_DCM/platon_out/platon_plasmids.log; Input files updated by another job: results/58_DCM/enough_filtered_virome_contigs.txt, results/58_DCM/contigs/virome.contigs.filtered.fasta
    wildcards: sample=58_DCM
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        platon --db /home/dlueckin/dbs/platon_db/db/ --prefix platon_plasmids         --output results/58_DCM/platon_out/         --threads 8         results/58_DCM/contigs/virome.contigs.filtered.fasta
        
Submitted job 148 with external jobid 'Submitted batch job 34699'.

[Fri Nov  4 13:20:04 2022]
rule DeepVirFinder:
    input: results/62_SRF/contigs/virome.contigs.filtered.fasta, results/62_SRF/enough_filtered_virome_contigs.txt
    output: results/62_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt
    jobid: 164
    reason: Missing output files: results/62_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt; Input files updated by another job: results/62_SRF/contigs/virome.contigs.filtered.fasta, results/62_SRF/enough_filtered_virome_contigs.txt
    wildcards: sample=62_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        python /home/dlueckin/bin/DeepVirFinder/dvf.py         -i results/62_SRF/contigs/virome.contigs.filtered.fasta         -o results/62_SRF/dvf -c 8
        
Submitted job 164 with external jobid 'Submitted batch job 34700'.

[Fri Nov  4 13:20:04 2022]
rule platon:
    input: results/62_SRF/contigs/virome.contigs.filtered.fasta, results/62_SRF/enough_filtered_virome_contigs.txt
    output: results/62_SRF/platon_out/platon_plasmids.log
    jobid: 165
    reason: Missing output files: results/62_SRF/platon_out/platon_plasmids.log; Input files updated by another job: results/62_SRF/contigs/virome.contigs.filtered.fasta, results/62_SRF/enough_filtered_virome_contigs.txt
    wildcards: sample=62_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        platon --db /home/dlueckin/dbs/platon_db/db/ --prefix platon_plasmids         --output results/62_SRF/platon_out/         --threads 8         results/62_SRF/contigs/virome.contigs.filtered.fasta
        
Submitted job 165 with external jobid 'Submitted batch job 34701'.

[Fri Nov  4 13:20:04 2022]
rule vs2:
    input: results/56_SRF/contigs/virome.contigs.filtered.fasta, results/56_SRF/enough_filtered_virome_contigs.txt
    output: results/56_SRF/vs2/final-viral-combined.fa, results/56_SRF/vs2/final-viral-score.tsv
    jobid: 127
    reason: Missing output files: results/56_SRF/vs2/final-viral-score.tsv, results/56_SRF/vs2/final-viral-combined.fa; Input files updated by another job: results/56_SRF/enough_filtered_virome_contigs.txt, results/56_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=56_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        virsorter run --keep-original-seq -i results/56_SRF/contigs/virome.contigs.filtered.fasta         -w results/56_SRF/vs2         --min-score 0.5 -j 8 all --db-dir /home/dlueckin/dbs/vs2/db/
        
Submitted job 127 with external jobid 'Submitted batch job 34702'.

[Fri Nov  4 13:20:04 2022]
rule platon:
    input: results/56_SRF/contigs/virome.contigs.filtered.fasta, results/56_SRF/enough_filtered_virome_contigs.txt
    output: results/56_SRF/platon_out/platon_plasmids.log
    jobid: 131
    reason: Missing output files: results/56_SRF/platon_out/platon_plasmids.log; Input files updated by another job: results/56_SRF/enough_filtered_virome_contigs.txt, results/56_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=56_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        platon --db /home/dlueckin/dbs/platon_db/db/ --prefix platon_plasmids         --output results/56_SRF/platon_out/         --threads 8         results/56_SRF/contigs/virome.contigs.filtered.fasta
        
Submitted job 131 with external jobid 'Submitted batch job 34703'.

[Fri Nov  4 13:20:04 2022]
rule DeepVirFinder:
    input: results/58_DCM/contigs/virome.contigs.filtered.fasta, results/58_DCM/enough_filtered_virome_contigs.txt
    output: results/58_DCM/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt
    jobid: 147
    reason: Missing output files: results/58_DCM/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt; Input files updated by another job: results/58_DCM/enough_filtered_virome_contigs.txt, results/58_DCM/contigs/virome.contigs.filtered.fasta
    wildcards: sample=58_DCM
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        python /home/dlueckin/bin/DeepVirFinder/dvf.py         -i results/58_DCM/contigs/virome.contigs.filtered.fasta         -o results/58_DCM/dvf -c 8
        
Submitted job 147 with external jobid 'Submitted batch job 34704'.

[Fri Nov  4 13:20:04 2022]
rule platon:
    input: results/45_SRF/contigs/virome.contigs.filtered.fasta, results/45_SRF/enough_filtered_virome_contigs.txt
    output: results/45_SRF/platon_out/platon_plasmids.log
    jobid: 29
    reason: Missing output files: results/45_SRF/platon_out/platon_plasmids.log; Input files updated by another job: results/45_SRF/enough_filtered_virome_contigs.txt, results/45_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=45_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        platon --db /home/dlueckin/dbs/platon_db/db/ --prefix platon_plasmids         --output results/45_SRF/platon_out/         --threads 8         results/45_SRF/contigs/virome.contigs.filtered.fasta
        
Submitted job 29 with external jobid 'Submitted batch job 34705'.

[Fri Nov  4 13:20:04 2022]
rule vs2:
    input: results/42_SRF/contigs/virome.contigs.filtered.fasta, results/42_SRF/enough_filtered_virome_contigs.txt
    output: results/42_SRF/vs2/final-viral-combined.fa, results/42_SRF/vs2/final-viral-score.tsv
    jobid: 8
    reason: Missing output files: results/42_SRF/vs2/final-viral-combined.fa, results/42_SRF/vs2/final-viral-score.tsv; Input files updated by another job: results/42_SRF/enough_filtered_virome_contigs.txt, results/42_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=42_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        virsorter run --keep-original-seq -i results/42_SRF/contigs/virome.contigs.filtered.fasta         -w results/42_SRF/vs2         --min-score 0.5 -j 8 all --db-dir /home/dlueckin/dbs/vs2/db/
        
Submitted job 8 with external jobid 'Submitted batch job 34706'.

[Fri Nov  4 13:20:04 2022]
rule platon:
    input: results/42_SRF/contigs/virome.contigs.filtered.fasta, results/42_SRF/enough_filtered_virome_contigs.txt
    output: results/42_SRF/platon_out/platon_plasmids.log
    jobid: 12
    reason: Missing output files: results/42_SRF/platon_out/platon_plasmids.log; Input files updated by another job: results/42_SRF/enough_filtered_virome_contigs.txt, results/42_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=42_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        platon --db /home/dlueckin/dbs/platon_db/db/ --prefix platon_plasmids         --output results/42_SRF/platon_out/         --threads 8         results/42_SRF/contigs/virome.contigs.filtered.fasta
        
Submitted job 12 with external jobid 'Submitted batch job 34707'.

[Fri Nov  4 13:20:04 2022]
rule vs2:
    input: results/62_SRF/contigs/virome.contigs.filtered.fasta, results/62_SRF/enough_filtered_virome_contigs.txt
    output: results/62_SRF/vs2/final-viral-combined.fa, results/62_SRF/vs2/final-viral-score.tsv
    jobid: 161
    reason: Missing output files: results/62_SRF/vs2/final-viral-combined.fa, results/62_SRF/vs2/final-viral-score.tsv; Input files updated by another job: results/62_SRF/contigs/virome.contigs.filtered.fasta, results/62_SRF/enough_filtered_virome_contigs.txt
    wildcards: sample=62_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        virsorter run --keep-original-seq -i results/62_SRF/contigs/virome.contigs.filtered.fasta         -w results/62_SRF/vs2         --min-score 0.5 -j 8 all --db-dir /home/dlueckin/dbs/vs2/db/
        
Submitted job 161 with external jobid 'Submitted batch job 34708'.

[Fri Nov  4 13:20:04 2022]
rule DeepVirFinder:
    input: results/56_SRF/contigs/virome.contigs.filtered.fasta, results/56_SRF/enough_filtered_virome_contigs.txt
    output: results/56_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt
    jobid: 130
    reason: Missing output files: results/56_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt; Input files updated by another job: results/56_SRF/enough_filtered_virome_contigs.txt, results/56_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=56_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        python /home/dlueckin/bin/DeepVirFinder/dvf.py         -i results/56_SRF/contigs/virome.contigs.filtered.fasta         -o results/56_SRF/dvf -c 8
        
Submitted job 130 with external jobid 'Submitted batch job 34709'.
[Fri Nov  4 13:20:04 2022]
Finished job 111.
20 of 171 steps (12%) done
Select jobs to execute...

[Fri Nov  4 13:20:04 2022]
rule DeepVirFinder:
    input: results/56_MES/contigs/virome.contigs.filtered.fasta, results/56_MES/enough_filtered_virome_contigs.txt
    output: results/56_MES/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt
    jobid: 113
    reason: Missing output files: results/56_MES/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt; Input files updated by another job: results/56_MES/contigs/virome.contigs.filtered.fasta, results/56_MES/enough_filtered_virome_contigs.txt
    wildcards: sample=56_MES
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        python /home/dlueckin/bin/DeepVirFinder/dvf.py         -i results/56_MES/contigs/virome.contigs.filtered.fasta         -o results/56_MES/dvf -c 8
        
Submitted job 113 with external jobid 'Submitted batch job 34710'.

[Fri Nov  4 13:20:04 2022]
rule platon:
    input: results/56_MES/contigs/virome.contigs.filtered.fasta, results/56_MES/enough_filtered_virome_contigs.txt
    output: results/56_MES/platon_out/platon_plasmids.log
    jobid: 114
    reason: Missing output files: results/56_MES/platon_out/platon_plasmids.log; Input files updated by another job: results/56_MES/contigs/virome.contigs.filtered.fasta, results/56_MES/enough_filtered_virome_contigs.txt
    wildcards: sample=56_MES
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        platon --db /home/dlueckin/dbs/platon_db/db/ --prefix platon_plasmids         --output results/56_MES/platon_out/         --threads 8         results/56_MES/contigs/virome.contigs.filtered.fasta
        
Submitted job 114 with external jobid 'Submitted batch job 34711'.

[Fri Nov  4 13:20:04 2022]
rule vs2:
    input: results/56_MES/contigs/virome.contigs.filtered.fasta, results/56_MES/enough_filtered_virome_contigs.txt
    output: results/56_MES/vs2/final-viral-combined.fa, results/56_MES/vs2/final-viral-score.tsv
    jobid: 110
    reason: Missing output files: results/56_MES/vs2/final-viral-combined.fa, results/56_MES/vs2/final-viral-score.tsv; Input files updated by another job: results/56_MES/contigs/virome.contigs.filtered.fasta, results/56_MES/enough_filtered_virome_contigs.txt
    wildcards: sample=56_MES
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        virsorter run --keep-original-seq -i results/56_MES/contigs/virome.contigs.filtered.fasta         -w results/56_MES/vs2         --min-score 0.5 -j 8 all --db-dir /home/dlueckin/dbs/vs2/db/
        
Submitted job 110 with external jobid 'Submitted batch job 34712'.
[Fri Nov  4 13:20:42 2022]
Error in rule DeepVirFinder:
    jobid: 62
    output: results/48_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt
    conda-env: /home/dlueckin/envs/068e13662b3fcc03063a1896269f387b
    shell:
        
        python /home/dlueckin/bin/DeepVirFinder/dvf.py         -i results/48_SRF/contigs/virome.contigs.filtered.fasta         -o results/48_SRF/dvf -c 8
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
    cluster_jobid: Submitted batch job 34685

Error executing rule DeepVirFinder on cluster (jobid: 62, external: Submitted batch job 34685, jobscript: /home/dlueckin/projects/mvome_pipeline/mviest/.snakemake/tmp.ahmf6pv2/snakejob.DeepVirFinder.62.sh). For error details see the cluster log and the log files of the involved rule(s).
Job failed, going on with independent jobs.
[Fri Nov  4 13:20:43 2022]
Error in rule DeepVirFinder:
    jobid: 45
    output: results/46_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt
    conda-env: /home/dlueckin/envs/068e13662b3fcc03063a1896269f387b
    shell:
        
        python /home/dlueckin/bin/DeepVirFinder/dvf.py         -i results/46_SRF/contigs/virome.contigs.filtered.fasta         -o results/46_SRF/dvf -c 8
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
    cluster_jobid: Submitted batch job 34689

Error executing rule DeepVirFinder on cluster (jobid: 45, external: Submitted batch job 34689, jobscript: /home/dlueckin/projects/mvome_pipeline/mviest/.snakemake/tmp.ahmf6pv2/snakejob.DeepVirFinder.45.sh). For error details see the cluster log and the log files of the involved rule(s).
Job failed, going on with independent jobs.
[Fri Nov  4 13:47:34 2022]
Finished job 11.
21 of 171 steps (12%) done
[Fri Nov  4 13:48:22 2022]
Finished job 79.
22 of 171 steps (13%) done
[Fri Nov  4 13:49:10 2022]
Finished job 28.
23 of 171 steps (13%) done
[Fri Nov  4 13:50:58 2022]
Finished job 96.
24 of 171 steps (14%) done
[Fri Nov  4 13:56:48 2022]
Finished job 147.
25 of 171 steps (15%) done
[Fri Nov  4 14:04:35 2022]
Finished job 164.
26 of 171 steps (15%) done
[Fri Nov  4 14:07:22 2022]
Finished job 130.
27 of 171 steps (16%) done
[Fri Nov  4 16:59:38 2022]
Finished job 46.
28 of 171 steps (16%) done
[Fri Nov  4 16:59:49 2022]
Finished job 113.
29 of 171 steps (17%) done
[Fri Nov  4 17:19:07 2022]
Finished job 63.
30 of 171 steps (18%) done
[Fri Nov  4 17:58:23 2022]
Finished job 59.
31 of 171 steps (18%) done
Select jobs to execute...

[Fri Nov  4 17:58:23 2022]
rule checkv:
    input: results/48_SRF/vs2/final-viral-combined.fa
    output: results/48_SRF/checkv/contamination.tsv
    jobid: 61
    reason: Missing output files: results/48_SRF/checkv/contamination.tsv; Input files updated by another job: results/48_SRF/vs2/final-viral-combined.fa
    wildcards: sample=48_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        checkv end_to_end results/48_SRF/vs2/final-viral-combined.fa results/48_SRF/checkv         -t 8 -d /home/dlueckin/dbs/checkv-db-v1.0
        
Submitted job 61 with external jobid 'Submitted batch job 34753'.
[Fri Nov  4 17:58:23 2022]
Finished job 42.
32 of 171 steps (19%) done
Select jobs to execute...

[Fri Nov  4 17:58:23 2022]
rule checkv:
    input: results/46_SRF/vs2/final-viral-combined.fa
    output: results/46_SRF/checkv/contamination.tsv
    jobid: 44
    reason: Missing output files: results/46_SRF/checkv/contamination.tsv; Input files updated by another job: results/46_SRF/vs2/final-viral-combined.fa
    wildcards: sample=46_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        checkv end_to_end results/46_SRF/vs2/final-viral-combined.fa results/46_SRF/checkv         -t 8 -d /home/dlueckin/dbs/checkv-db-v1.0
        
Submitted job 44 with external jobid 'Submitted batch job 34754'.
[Fri Nov  4 18:00:15 2022]
Finished job 148.
33 of 171 steps (19%) done
[Fri Nov  4 18:05:22 2022]
Finished job 80.
34 of 171 steps (20%) done
[Fri Nov  4 18:18:13 2022]
Finished job 97.
35 of 171 steps (20%) done
[Fri Nov  4 18:36:34 2022]
Finished job 44.
36 of 171 steps (21%) done
Select jobs to execute...

[Fri Nov  4 18:36:34 2022]
localrule vs2_summary:
    input: results/46_SRF/vs2/final-viral-score.tsv, results/46_SRF/checkv/contamination.tsv
    output: results/46_SRF/vs2_final_report.tsv
    jobid: 41
    reason: Missing output files: results/46_SRF/vs2_final_report.tsv; Input files updated by another job: results/46_SRF/vs2/final-viral-score.tsv, results/46_SRF/checkv/contamination.tsv
    wildcards: sample=46_SRF
    resources: tmpdir=/tmp

Rscript scripts/analyze_vs2_output.R results/46_SRF/vs2/final-viral-score.tsv results/46_SRF/checkv/contamination.tsv results/46_SRF/vs2_final_report.tsv
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
[1] "Quick Summary"

manual curation       not viral      true viral 
             12             378           13043 
[Fri Nov  4 18:36:58 2022]
Finished job 41.
37 of 171 steps (22%) done
[Fri Nov  4 18:40:36 2022]
Finished job 12.
38 of 171 steps (22%) done
[Fri Nov  4 18:43:32 2022]
Finished job 61.
39 of 171 steps (23%) done
Select jobs to execute...

[Fri Nov  4 18:43:32 2022]
localrule vs2_summary:
    input: results/48_SRF/vs2/final-viral-score.tsv, results/48_SRF/checkv/contamination.tsv
    output: results/48_SRF/vs2_final_report.tsv
    jobid: 58
    reason: Missing output files: results/48_SRF/vs2_final_report.tsv; Input files updated by another job: results/48_SRF/checkv/contamination.tsv, results/48_SRF/vs2/final-viral-score.tsv
    wildcards: sample=48_SRF
    resources: tmpdir=/tmp

Rscript scripts/analyze_vs2_output.R results/48_SRF/vs2/final-viral-score.tsv results/48_SRF/checkv/contamination.tsv results/48_SRF/vs2_final_report.tsv
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
[1] "Quick Summary"

manual curation       not viral      true viral 
              7             487           16431 
[Fri Nov  4 18:44:01 2022]
Finished job 58.
40 of 171 steps (23%) done
[Fri Nov  4 19:06:19 2022]
Finished job 29.
41 of 171 steps (24%) done
[Fri Nov  4 19:12:32 2022]
Finished job 144.
42 of 171 steps (25%) done
Select jobs to execute...

[Fri Nov  4 19:12:32 2022]
rule checkv:
    input: results/58_DCM/vs2/final-viral-combined.fa
    output: results/58_DCM/checkv/contamination.tsv
    jobid: 146
    reason: Missing output files: results/58_DCM/checkv/contamination.tsv; Input files updated by another job: results/58_DCM/vs2/final-viral-combined.fa
    wildcards: sample=58_DCM
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        checkv end_to_end results/58_DCM/vs2/final-viral-combined.fa results/58_DCM/checkv         -t 8 -d /home/dlueckin/dbs/checkv-db-v1.0
        
Submitted job 146 with external jobid 'Submitted batch job 34763'.
[Fri Nov  4 19:28:41 2022]
Finished job 165.
43 of 171 steps (25%) done
[Fri Nov  4 19:38:14 2022]
Finished job 76.
44 of 171 steps (26%) done
Select jobs to execute...

[Fri Nov  4 19:38:14 2022]
rule checkv:
    input: results/52_DCM/vs2/final-viral-combined.fa
    output: results/52_DCM/checkv/contamination.tsv
    jobid: 78
    reason: Missing output files: results/52_DCM/checkv/contamination.tsv; Input files updated by another job: results/52_DCM/vs2/final-viral-combined.fa
    wildcards: sample=52_DCM
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        checkv end_to_end results/52_DCM/vs2/final-viral-combined.fa results/52_DCM/checkv         -t 8 -d /home/dlueckin/dbs/checkv-db-v1.0
        
Submitted job 78 with external jobid 'Submitted batch job 34764'.
[Fri Nov  4 19:40:59 2022]
Finished job 131.
45 of 171 steps (26%) done
[Fri Nov  4 19:41:40 2022]
Finished job 93.
46 of 171 steps (27%) done
Select jobs to execute...

[Fri Nov  4 19:41:40 2022]
rule checkv:
    input: results/52_SRF/vs2/final-viral-combined.fa
    output: results/52_SRF/checkv/contamination.tsv
    jobid: 95
    reason: Missing output files: results/52_SRF/checkv/contamination.tsv; Input files updated by another job: results/52_SRF/vs2/final-viral-combined.fa
    wildcards: sample=52_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        checkv end_to_end results/52_SRF/vs2/final-viral-combined.fa results/52_SRF/checkv         -t 8 -d /home/dlueckin/dbs/checkv-db-v1.0
        
Submitted job 95 with external jobid 'Submitted batch job 34765'.
[Fri Nov  4 19:55:21 2022]
Finished job 25.
47 of 171 steps (27%) done
Select jobs to execute...

[Fri Nov  4 19:55:21 2022]
rule checkv:
    input: results/45_SRF/vs2/final-viral-combined.fa
    output: results/45_SRF/checkv/contamination.tsv
    jobid: 27
    reason: Missing output files: results/45_SRF/checkv/contamination.tsv; Input files updated by another job: results/45_SRF/vs2/final-viral-combined.fa
    wildcards: sample=45_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        checkv end_to_end results/45_SRF/vs2/final-viral-combined.fa results/45_SRF/checkv         -t 8 -d /home/dlueckin/dbs/checkv-db-v1.0
        
Submitted job 27 with external jobid 'Submitted batch job 34766'.
[Fri Nov  4 20:13:02 2022]
Finished job 146.
48 of 171 steps (28%) done
Select jobs to execute...

[Fri Nov  4 20:13:02 2022]
localrule vs2_summary:
    input: results/58_DCM/vs2/final-viral-score.tsv, results/58_DCM/checkv/contamination.tsv
    output: results/58_DCM/vs2_final_report.tsv
    jobid: 143
    reason: Missing output files: results/58_DCM/vs2_final_report.tsv; Input files updated by another job: results/58_DCM/checkv/contamination.tsv, results/58_DCM/vs2/final-viral-score.tsv
    wildcards: sample=58_DCM
    resources: tmpdir=/tmp

Rscript scripts/analyze_vs2_output.R results/58_DCM/vs2/final-viral-score.tsv results/58_DCM/checkv/contamination.tsv results/58_DCM/vs2_final_report.tsv
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
[1] "Quick Summary"

manual curation       not viral      true viral 
             16             728           22689 
[Fri Nov  4 20:13:48 2022]
Finished job 143.
49 of 171 steps (29%) done
Select jobs to execute...

[Fri Nov  4 20:13:48 2022]
localrule contig_summary:
    input: results/58_DCM/contigs/virome.contigs.filtered.fasta, results/58_DCM/vs2_final_report.tsv, results/58_DCM/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt, results/58_DCM/platon_out/platon_plasmids.log, results/58_DCM/enough_filtered_virome_contigs.txt
    output: results/58_DCM/contig_summary_58_DCM.tsv
    log: results/58_DCM/log/contig_summary.log
    jobid: 141
    reason: Missing output files: results/58_DCM/contig_summary_58_DCM.tsv; Input files updated by another job: results/58_DCM/vs2_final_report.tsv, results/58_DCM/contigs/virome.contigs.filtered.fasta, results/58_DCM/platon_out/platon_plasmids.log, results/58_DCM/enough_filtered_virome_contigs.txt, results/58_DCM/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt
    wildcards: sample=58_DCM
    resources: tmpdir=/tmp

Rscript scripts/summarize.R 58_DCM 150000 2> results/58_DCM/log/contig_summary.log
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
[Fri Nov  4 20:14:14 2022]
Finished job 141.
50 of 171 steps (29%) done
Select jobs to execute...

[Fri Nov  4 20:14:14 2022]
localrule contig_selector:
    input: results/58_DCM/contig_summary_58_DCM.tsv, results/58_DCM/contigs/virome.contigs.filtered.fasta, results/58_DCM/enough_filtered_virome_contigs.txt
    output: results/58_DCM/contigs/true.mvome.fasta, results/58_DCM/contigs/true.virome.fasta
    log: results/58_DCM/log/contig_selector.log
    jobid: 140
    reason: Missing output files: results/58_DCM/contigs/true.mvome.fasta, results/58_DCM/contigs/true.virome.fasta; Input files updated by another job: results/58_DCM/enough_filtered_virome_contigs.txt, results/58_DCM/contigs/virome.contigs.filtered.fasta, results/58_DCM/contig_summary_58_DCM.tsv
    wildcards: sample=58_DCM
    resources: tmpdir=/tmp

python scripts/contig_selector.py 58_DCM 2> results/58_DCM/log/contig_selector.log
Activating conda environment: /home/dlueckin/envs/f57ba2b792805d07331ad6f4d9adf21c
[Fri Nov  4 20:15:04 2022]
Finished job 140.
51 of 171 steps (30%) done
Select jobs to execute...

[Fri Nov  4 20:15:04 2022]
rule map_virome_reads_to_mv_contigs:
    input: results/58_DCM/reads/virome.reads1.fastq.gz, results/58_DCM/reads/virome.reads2.fastq.gz, results/58_DCM/contigs/true.mvome.fasta
    output: results/58_DCM/reads/true.mvome.reads1.fq.gz, results/58_DCM/reads/true.mvome.reads2.fq.gz, results/58_DCM/mappings/input_reads_vs_mv_contigs/statsfile.txt
    log: results/58_DCM/log/map_virome_reads_to_mv_contigs.log
    jobid: 139
    reason: Missing output files: results/58_DCM/reads/true.mvome.reads1.fq.gz, results/58_DCM/reads/true.mvome.reads2.fq.gz; Input files updated by another job: results/58_DCM/contigs/true.mvome.fasta
    wildcards: sample=58_DCM
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/58_DCM/mappings/input_reads_vs_mv_contigs/

        if [[ -s results/58_DCM/contigs/true.mvome.fasta && -s results/58_DCM/reads/virome.reads1.fastq.gz && -s results/58_DCM/reads/virome.reads2.fastq.gz ]]; then
            # the input contig file is NOT empty
            bbmap.sh in=results/58_DCM/reads/virome.reads1.fastq.gz in2=results/58_DCM/reads/virome.reads2.fastq.gz             ref=results/58_DCM/contigs/true.mvome.fasta             outm=results/58_DCM/reads/true.mvome.reads1.fq.gz outm2=results/58_DCM/reads/true.mvome.reads2.fq.gz             statsfile=results/58_DCM/mappings/input_reads_vs_mv_contigs/statsfile.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/58_DCM/reads/true.mvome.reads1.fq.gz results/58_DCM/reads/true.mvome.reads2.fq.gz results/58_DCM/mappings/input_reads_vs_mv_contigs/statsfile.txt
        fi
        
Submitted job 139 with external jobid 'Submitted batch job 34767'.

[Fri Nov  4 20:15:04 2022]
rule map_virome_reads_to_true_virome_contigs:
    input: results/58_DCM/reads/virome.reads1.fastq.gz, results/58_DCM/reads/virome.reads2.fastq.gz, results/58_DCM/contigs/true.virome.fasta
    output: results/58_DCM/reads/true.virome.reads1.fq.gz, results/58_DCM/reads/true.virome.reads2.fq.gz, results/58_DCM/mappings/input_reads_vs_true_virome_contigs/scafstats.txt, results/58_DCM/mappings/input_reads_vs_true_virome_contigs/rpkm.txt
    log: results/58_DCM/log/map_virome_reads_vs_true_virome_contigs.log
    jobid: 150
    reason: Missing output files: results/58_DCM/reads/true.virome.reads2.fq.gz, results/58_DCM/reads/true.virome.reads1.fq.gz; Input files updated by another job: results/58_DCM/contigs/true.virome.fasta
    wildcards: sample=58_DCM
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        mkdir -p results/58_DCM/mappings/input_reads_vs_true_virome_contigs/

        if [[ -s results/58_DCM/contigs/true.virome.fasta && -s results/58_DCM/reads/virome.reads1.fastq.gz && -s results/58_DCM/reads/virome.reads2.fastq.gz ]]; then
            # the input contig file or the reads are NOT empty
            bbmap.sh in=results/58_DCM/reads/virome.reads1.fastq.gz in2=results/58_DCM/reads/virome.reads2.fastq.gz             ref=results/58_DCM/contigs/true.virome.fasta             outm=results/58_DCM/reads/true.virome.reads1.fq.gz outm2=results/58_DCM/reads/true.virome.reads2.fq.gz             scafstats=results/58_DCM/mappings/input_reads_vs_true_virome_contigs/scafstats.txt             rpkm=results/58_DCM/mappings/input_reads_vs_true_virome_contigs/rpkm.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/58_DCM/reads/true.virome.reads1.fq.gz results/58_DCM/reads/true.virome.reads2.fq.gz results/58_DCM/mappings/input_reads_vs_true_virome_contigs/scafstats.txt results/58_DCM/mappings/input_reads_vs_true_virome_contigs/rpkm.txt
        fi        
        
Submitted job 150 with external jobid 'Submitted batch job 34768'.
[Fri Nov  4 20:17:57 2022]
Finished job 114.
52 of 171 steps (30%) done
[Fri Nov  4 20:33:39 2022]
Finished job 139.
53 of 171 steps (31%) done
Select jobs to execute...

[Fri Nov  4 20:33:39 2022]
rule map_mv_positive_reads_to_metagenome:
    input: results/58_DCM/reads/true.mvome.reads1.fq.gz, results/58_DCM/reads/true.mvome.reads2.fq.gz, results/58_DCM/contigs/metagenome.contigs.filtered.fasta.gz
    output: results/58_DCM/mappings/mvome_positive_vs_metagenome/rpkm.txt, results/58_DCM/mappings/mvome_positive_vs_metagenome/scafstats.txt
    jobid: 153
    reason: Missing output files: results/58_DCM/mappings/mvome_positive_vs_metagenome/scafstats.txt; Input files updated by another job: results/58_DCM/reads/true.mvome.reads1.fq.gz, results/58_DCM/reads/true.mvome.reads2.fq.gz
    wildcards: sample=58_DCM
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        mkdir -p results/58_DCM/mappings/mvome_positive_vs_metagenome/

        if [[ -s results/58_DCM/contigs/metagenome.contigs.filtered.fasta.gz && -s results/58_DCM/reads/true.mvome.reads1.fq.gz && -s results/58_DCM/reads/true.mvome.reads2.fq.gz ]]; then
            # the input contig file or the reads are NOT empty
            bbmap.sh in=results/58_DCM/reads/true.mvome.reads1.fq.gz in2=results/58_DCM/reads/true.mvome.reads2.fq.gz             ref=results/58_DCM/contigs/metagenome.contigs.filtered.fasta.gz             scafstats=results/58_DCM/mappings/mvome_positive_vs_metagenome/scafstats.txt             rpkm=results/58_DCM/mappings/mvome_positive_vs_metagenome/rpkm.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/58_DCM/mappings/mvome_positive_vs_metagenome/scafstats.txt results/58_DCM/mappings/mvome_positive_vs_metagenome/rpkm.txt
        fi      
        
Submitted job 153 with external jobid 'Submitted batch job 34769'.

[Fri Nov  4 20:33:39 2022]
rule kaiju_mvome:
    input: results/58_DCM/reads/true.mvome.reads1.fq.gz, results/58_DCM/reads/true.mvome.reads2.fq.gz
    output: results/58_DCM/kaiju/mvome.out, results/58_DCM/kaiju/mvome_summary.tsv
    jobid: 138
    reason: Missing output files: results/58_DCM/kaiju/mvome_summary.tsv; Input files updated by another job: results/58_DCM/reads/true.mvome.reads1.fq.gz, results/58_DCM/reads/true.mvome.reads2.fq.gz
    wildcards: sample=58_DCM
    resources: tmpdir=/tmp, mem=250G, time=12:00:00, ntasks=8


        mkdir -p results/58_DCM/kaiju
        
        if [ -s results/58_DCM/reads/true.mvome.reads1.fq.gz ]; then
            kaiju-multi -z 8             -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -f /bioinf/home/dlueckin/dbs/kaiju_db_nr/kaiju_db_nr.fmi             -i results/58_DCM/reads/true.mvome.reads1.fq.gz             -j results/58_DCM/reads/true.mvome.reads2.fq.gz             -o results/58_DCM/kaiju/mvome.out

            kaiju2table -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -n /bioinf/home/dlueckin/dbs/kaiju_db_nr/names.dmp             -r genus -o results/58_DCM/kaiju/mvome_summary.tsv results/58_DCM/kaiju/mvome.out
        else
            touch results/58_DCM/kaiju/mvome.out results/58_DCM/kaiju/mvome_summary.tsv
        fi
        
Submitted job 138 with external jobid 'Submitted batch job 34770'.

[Fri Nov  4 20:33:39 2022]
rule viromeQC_mvome:
    input: results/58_DCM/reads/true.mvome.reads1.fq.gz, results/58_DCM/reads/true.mvome.reads2.fq.gz
    output: results/58_DCM/viromeQC/mvome_QC.tsv
    jobid: 151
    reason: Missing output files: results/58_DCM/viromeQC/mvome_QC.tsv; Input files updated by another job: results/58_DCM/reads/true.mvome.reads1.fq.gz, results/58_DCM/reads/true.mvome.reads2.fq.gz
    wildcards: sample=58_DCM
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/58_DCM/viromeQC

        if [ -s results/58_DCM/reads/true.mvome.reads1.fq.gz ]; then
            python /home/dlueckin/bin/viromeqc/viromeQC.py -w environmental             --diamond_threads 8 --bowtie2_threads 8             -i results/58_DCM/reads/true.mvome.reads1.fq.gz results/58_DCM/reads/true.mvome.reads2.fq.gz             -o results/58_DCM/viromeQC/mvome_QC.tsv
        else
            touch results/58_DCM/viromeQC/mvome_QC.tsv
        fi
        
Submitted job 151 with external jobid 'Submitted batch job 34771'.
[Fri Nov  4 20:34:11 2022]
Finished job 153.
54 of 171 steps (32%) done
[Fri Nov  4 20:37:07 2022]
Finished job 138.
55 of 171 steps (32%) done
[Fri Nov  4 20:37:07 2022]
Finished job 151.
56 of 171 steps (33%) done
[Fri Nov  4 20:41:49 2022]
Finished job 78.
57 of 171 steps (33%) done
Select jobs to execute...

[Fri Nov  4 20:41:49 2022]
localrule vs2_summary:
    input: results/52_DCM/vs2/final-viral-score.tsv, results/52_DCM/checkv/contamination.tsv
    output: results/52_DCM/vs2_final_report.tsv
    jobid: 75
    reason: Missing output files: results/52_DCM/vs2_final_report.tsv; Input files updated by another job: results/52_DCM/checkv/contamination.tsv, results/52_DCM/vs2/final-viral-score.tsv
    wildcards: sample=52_DCM
    resources: tmpdir=/tmp

Rscript scripts/analyze_vs2_output.R results/52_DCM/vs2/final-viral-score.tsv results/52_DCM/checkv/contamination.tsv results/52_DCM/vs2_final_report.tsv
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
[Fri Nov  4 20:41:49 2022]
Finished job 95.
58 of 171 steps (34%) done
Select jobs to execute...

[Fri Nov  4 20:41:49 2022]
localrule vs2_summary:
    input: results/52_SRF/vs2/final-viral-score.tsv, results/52_SRF/checkv/contamination.tsv
    output: results/52_SRF/vs2_final_report.tsv
    jobid: 92
    reason: Missing output files: results/52_SRF/vs2_final_report.tsv; Input files updated by another job: results/52_SRF/checkv/contamination.tsv, results/52_SRF/vs2/final-viral-score.tsv
    wildcards: sample=52_SRF
    resources: tmpdir=/tmp

Rscript scripts/analyze_vs2_output.R results/52_SRF/vs2/final-viral-score.tsv results/52_SRF/checkv/contamination.tsv results/52_SRF/vs2_final_report.tsv
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
[1] "Quick Summary"

manual curation       not viral      true viral 
             15             663           23141 
[Fri Nov  4 20:42:31 2022]
Finished job 92.
59 of 171 steps (35%) done
Select jobs to execute...

[Fri Nov  4 20:42:31 2022]
localrule contig_summary:
    input: results/52_SRF/contigs/virome.contigs.filtered.fasta, results/52_SRF/vs2_final_report.tsv, results/52_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt, results/52_SRF/platon_out/platon_plasmids.log, results/52_SRF/enough_filtered_virome_contigs.txt
    output: results/52_SRF/contig_summary_52_SRF.tsv
    log: results/52_SRF/log/contig_summary.log
    jobid: 90
    reason: Missing output files: results/52_SRF/contig_summary_52_SRF.tsv; Input files updated by another job: results/52_SRF/contigs/virome.contigs.filtered.fasta, results/52_SRF/enough_filtered_virome_contigs.txt, results/52_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt, results/52_SRF/vs2_final_report.tsv, results/52_SRF/platon_out/platon_plasmids.log
    wildcards: sample=52_SRF
    resources: tmpdir=/tmp

Rscript scripts/summarize.R 52_SRF 150000 2> results/52_SRF/log/contig_summary.log
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
[1] "Quick Summary"

manual curation       not viral      true viral 
             23             857           24327 
[Fri Nov  4 20:42:43 2022]
Finished job 75.
60 of 171 steps (35%) done
Select jobs to execute...

[Fri Nov  4 20:42:43 2022]
localrule contig_summary:
    input: results/52_DCM/contigs/virome.contigs.filtered.fasta, results/52_DCM/vs2_final_report.tsv, results/52_DCM/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt, results/52_DCM/platon_out/platon_plasmids.log, results/52_DCM/enough_filtered_virome_contigs.txt
    output: results/52_DCM/contig_summary_52_DCM.tsv
    log: results/52_DCM/log/contig_summary.log
    jobid: 73
    reason: Missing output files: results/52_DCM/contig_summary_52_DCM.tsv; Input files updated by another job: results/52_DCM/vs2_final_report.tsv, results/52_DCM/contigs/virome.contigs.filtered.fasta, results/52_DCM/platon_out/platon_plasmids.log, results/52_DCM/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt, results/52_DCM/enough_filtered_virome_contigs.txt
    wildcards: sample=52_DCM
    resources: tmpdir=/tmp

Rscript scripts/summarize.R 52_DCM 150000 2> results/52_DCM/log/contig_summary.log
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
[Fri Nov  4 20:42:56 2022]
Finished job 90.
61 of 171 steps (36%) done
Select jobs to execute...

[Fri Nov  4 20:42:56 2022]
localrule contig_selector:
    input: results/52_SRF/contig_summary_52_SRF.tsv, results/52_SRF/contigs/virome.contigs.filtered.fasta, results/52_SRF/enough_filtered_virome_contigs.txt
    output: results/52_SRF/contigs/true.mvome.fasta, results/52_SRF/contigs/true.virome.fasta
    log: results/52_SRF/log/contig_selector.log
    jobid: 89
    reason: Missing output files: results/52_SRF/contigs/true.virome.fasta, results/52_SRF/contigs/true.mvome.fasta; Input files updated by another job: results/52_SRF/contig_summary_52_SRF.tsv, results/52_SRF/contigs/virome.contigs.filtered.fasta, results/52_SRF/enough_filtered_virome_contigs.txt
    wildcards: sample=52_SRF
    resources: tmpdir=/tmp

python scripts/contig_selector.py 52_SRF 2> results/52_SRF/log/contig_selector.log
Activating conda environment: /home/dlueckin/envs/f57ba2b792805d07331ad6f4d9adf21c
[Fri Nov  4 20:43:07 2022]
Finished job 73.
62 of 171 steps (36%) done
Select jobs to execute...

[Fri Nov  4 20:43:07 2022]
localrule contig_selector:
    input: results/52_DCM/contig_summary_52_DCM.tsv, results/52_DCM/contigs/virome.contigs.filtered.fasta, results/52_DCM/enough_filtered_virome_contigs.txt
    output: results/52_DCM/contigs/true.mvome.fasta, results/52_DCM/contigs/true.virome.fasta
    log: results/52_DCM/log/contig_selector.log
    jobid: 72
    reason: Missing output files: results/52_DCM/contigs/true.mvome.fasta, results/52_DCM/contigs/true.virome.fasta; Input files updated by another job: results/52_DCM/enough_filtered_virome_contigs.txt, results/52_DCM/contig_summary_52_DCM.tsv, results/52_DCM/contigs/virome.contigs.filtered.fasta
    wildcards: sample=52_DCM
    resources: tmpdir=/tmp

python scripts/contig_selector.py 52_DCM 2> results/52_DCM/log/contig_selector.log
Activating conda environment: /home/dlueckin/envs/f57ba2b792805d07331ad6f4d9adf21c
[Fri Nov  4 20:43:55 2022]
Finished job 89.
63 of 171 steps (37%) done
Select jobs to execute...

[Fri Nov  4 20:43:55 2022]
rule map_virome_reads_to_true_virome_contigs:
    input: results/52_SRF/reads/virome.reads1.fastq.gz, results/52_SRF/reads/virome.reads2.fastq.gz, results/52_SRF/contigs/true.virome.fasta
    output: results/52_SRF/reads/true.virome.reads1.fq.gz, results/52_SRF/reads/true.virome.reads2.fq.gz, results/52_SRF/mappings/input_reads_vs_true_virome_contigs/scafstats.txt, results/52_SRF/mappings/input_reads_vs_true_virome_contigs/rpkm.txt
    log: results/52_SRF/log/map_virome_reads_vs_true_virome_contigs.log
    jobid: 99
    reason: Missing output files: results/52_SRF/reads/true.virome.reads2.fq.gz, results/52_SRF/reads/true.virome.reads1.fq.gz; Input files updated by another job: results/52_SRF/contigs/true.virome.fasta
    wildcards: sample=52_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        mkdir -p results/52_SRF/mappings/input_reads_vs_true_virome_contigs/

        if [[ -s results/52_SRF/contigs/true.virome.fasta && -s results/52_SRF/reads/virome.reads1.fastq.gz && -s results/52_SRF/reads/virome.reads2.fastq.gz ]]; then
            # the input contig file or the reads are NOT empty
            bbmap.sh in=results/52_SRF/reads/virome.reads1.fastq.gz in2=results/52_SRF/reads/virome.reads2.fastq.gz             ref=results/52_SRF/contigs/true.virome.fasta             outm=results/52_SRF/reads/true.virome.reads1.fq.gz outm2=results/52_SRF/reads/true.virome.reads2.fq.gz             scafstats=results/52_SRF/mappings/input_reads_vs_true_virome_contigs/scafstats.txt             rpkm=results/52_SRF/mappings/input_reads_vs_true_virome_contigs/rpkm.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/52_SRF/reads/true.virome.reads1.fq.gz results/52_SRF/reads/true.virome.reads2.fq.gz results/52_SRF/mappings/input_reads_vs_true_virome_contigs/scafstats.txt results/52_SRF/mappings/input_reads_vs_true_virome_contigs/rpkm.txt
        fi        
        
Submitted job 99 with external jobid 'Submitted batch job 34772'.

[Fri Nov  4 20:43:55 2022]
rule map_virome_reads_to_mv_contigs:
    input: results/52_SRF/reads/virome.reads1.fastq.gz, results/52_SRF/reads/virome.reads2.fastq.gz, results/52_SRF/contigs/true.mvome.fasta
    output: results/52_SRF/reads/true.mvome.reads1.fq.gz, results/52_SRF/reads/true.mvome.reads2.fq.gz, results/52_SRF/mappings/input_reads_vs_mv_contigs/statsfile.txt
    log: results/52_SRF/log/map_virome_reads_to_mv_contigs.log
    jobid: 88
    reason: Missing output files: results/52_SRF/reads/true.mvome.reads2.fq.gz, results/52_SRF/reads/true.mvome.reads1.fq.gz; Input files updated by another job: results/52_SRF/contigs/true.mvome.fasta
    wildcards: sample=52_SRF
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/52_SRF/mappings/input_reads_vs_mv_contigs/

        if [[ -s results/52_SRF/contigs/true.mvome.fasta && -s results/52_SRF/reads/virome.reads1.fastq.gz && -s results/52_SRF/reads/virome.reads2.fastq.gz ]]; then
            # the input contig file is NOT empty
            bbmap.sh in=results/52_SRF/reads/virome.reads1.fastq.gz in2=results/52_SRF/reads/virome.reads2.fastq.gz             ref=results/52_SRF/contigs/true.mvome.fasta             outm=results/52_SRF/reads/true.mvome.reads1.fq.gz outm2=results/52_SRF/reads/true.mvome.reads2.fq.gz             statsfile=results/52_SRF/mappings/input_reads_vs_mv_contigs/statsfile.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/52_SRF/reads/true.mvome.reads1.fq.gz results/52_SRF/reads/true.mvome.reads2.fq.gz results/52_SRF/mappings/input_reads_vs_mv_contigs/statsfile.txt
        fi
        
Submitted job 88 with external jobid 'Submitted batch job 34773'.
[Fri Nov  4 20:44:03 2022]
Finished job 72.
64 of 171 steps (37%) done
Select jobs to execute...

[Fri Nov  4 20:44:03 2022]
rule map_virome_reads_to_true_virome_contigs:
    input: results/52_DCM/reads/virome.reads1.fastq.gz, results/52_DCM/reads/virome.reads2.fastq.gz, results/52_DCM/contigs/true.virome.fasta
    output: results/52_DCM/reads/true.virome.reads1.fq.gz, results/52_DCM/reads/true.virome.reads2.fq.gz, results/52_DCM/mappings/input_reads_vs_true_virome_contigs/scafstats.txt, results/52_DCM/mappings/input_reads_vs_true_virome_contigs/rpkm.txt
    log: results/52_DCM/log/map_virome_reads_vs_true_virome_contigs.log
    jobid: 82
    reason: Missing output files: results/52_DCM/reads/true.virome.reads2.fq.gz, results/52_DCM/reads/true.virome.reads1.fq.gz; Input files updated by another job: results/52_DCM/contigs/true.virome.fasta
    wildcards: sample=52_DCM
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        mkdir -p results/52_DCM/mappings/input_reads_vs_true_virome_contigs/

        if [[ -s results/52_DCM/contigs/true.virome.fasta && -s results/52_DCM/reads/virome.reads1.fastq.gz && -s results/52_DCM/reads/virome.reads2.fastq.gz ]]; then
            # the input contig file or the reads are NOT empty
            bbmap.sh in=results/52_DCM/reads/virome.reads1.fastq.gz in2=results/52_DCM/reads/virome.reads2.fastq.gz             ref=results/52_DCM/contigs/true.virome.fasta             outm=results/52_DCM/reads/true.virome.reads1.fq.gz outm2=results/52_DCM/reads/true.virome.reads2.fq.gz             scafstats=results/52_DCM/mappings/input_reads_vs_true_virome_contigs/scafstats.txt             rpkm=results/52_DCM/mappings/input_reads_vs_true_virome_contigs/rpkm.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/52_DCM/reads/true.virome.reads1.fq.gz results/52_DCM/reads/true.virome.reads2.fq.gz results/52_DCM/mappings/input_reads_vs_true_virome_contigs/scafstats.txt results/52_DCM/mappings/input_reads_vs_true_virome_contigs/rpkm.txt
        fi        
        
Submitted job 82 with external jobid 'Submitted batch job 34774'.

[Fri Nov  4 20:44:03 2022]
rule map_virome_reads_to_mv_contigs:
    input: results/52_DCM/reads/virome.reads1.fastq.gz, results/52_DCM/reads/virome.reads2.fastq.gz, results/52_DCM/contigs/true.mvome.fasta
    output: results/52_DCM/reads/true.mvome.reads1.fq.gz, results/52_DCM/reads/true.mvome.reads2.fq.gz, results/52_DCM/mappings/input_reads_vs_mv_contigs/statsfile.txt
    log: results/52_DCM/log/map_virome_reads_to_mv_contigs.log
    jobid: 71
    reason: Missing output files: results/52_DCM/reads/true.mvome.reads1.fq.gz, results/52_DCM/reads/true.mvome.reads2.fq.gz; Input files updated by another job: results/52_DCM/contigs/true.mvome.fasta
    wildcards: sample=52_DCM
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/52_DCM/mappings/input_reads_vs_mv_contigs/

        if [[ -s results/52_DCM/contigs/true.mvome.fasta && -s results/52_DCM/reads/virome.reads1.fastq.gz && -s results/52_DCM/reads/virome.reads2.fastq.gz ]]; then
            # the input contig file is NOT empty
            bbmap.sh in=results/52_DCM/reads/virome.reads1.fastq.gz in2=results/52_DCM/reads/virome.reads2.fastq.gz             ref=results/52_DCM/contigs/true.mvome.fasta             outm=results/52_DCM/reads/true.mvome.reads1.fq.gz outm2=results/52_DCM/reads/true.mvome.reads2.fq.gz             statsfile=results/52_DCM/mappings/input_reads_vs_mv_contigs/statsfile.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/52_DCM/reads/true.mvome.reads1.fq.gz results/52_DCM/reads/true.mvome.reads2.fq.gz results/52_DCM/mappings/input_reads_vs_mv_contigs/statsfile.txt
        fi
        
Submitted job 71 with external jobid 'Submitted batch job 34775'.
[Fri Nov  4 20:44:42 2022]
Finished job 27.
65 of 171 steps (38%) done
Select jobs to execute...

[Fri Nov  4 20:44:42 2022]
localrule vs2_summary:
    input: results/45_SRF/vs2/final-viral-score.tsv, results/45_SRF/checkv/contamination.tsv
    output: results/45_SRF/vs2_final_report.tsv
    jobid: 24
    reason: Missing output files: results/45_SRF/vs2_final_report.tsv; Input files updated by another job: results/45_SRF/vs2/final-viral-score.tsv, results/45_SRF/checkv/contamination.tsv
    wildcards: sample=45_SRF
    resources: tmpdir=/tmp

Rscript scripts/analyze_vs2_output.R results/45_SRF/vs2/final-viral-score.tsv results/45_SRF/checkv/contamination.tsv results/45_SRF/vs2_final_report.tsv
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
[1] "Quick Summary"

manual curation       not viral      true viral 
             14             513           18749 
[Fri Nov  4 20:45:14 2022]
Finished job 24.
66 of 171 steps (39%) done
Select jobs to execute...

[Fri Nov  4 20:45:14 2022]
localrule contig_summary:
    input: results/45_SRF/contigs/virome.contigs.filtered.fasta, results/45_SRF/vs2_final_report.tsv, results/45_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt, results/45_SRF/platon_out/platon_plasmids.log, results/45_SRF/enough_filtered_virome_contigs.txt
    output: results/45_SRF/contig_summary_45_SRF.tsv
    log: results/45_SRF/log/contig_summary.log
    jobid: 22
    reason: Missing output files: results/45_SRF/contig_summary_45_SRF.tsv; Input files updated by another job: results/45_SRF/enough_filtered_virome_contigs.txt, results/45_SRF/contigs/virome.contigs.filtered.fasta, results/45_SRF/platon_out/platon_plasmids.log, results/45_SRF/vs2_final_report.tsv, results/45_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt
    wildcards: sample=45_SRF
    resources: tmpdir=/tmp

Rscript scripts/summarize.R 45_SRF 150000 2> results/45_SRF/log/contig_summary.log
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
[Fri Nov  4 20:45:41 2022]
Finished job 22.
67 of 171 steps (39%) done
Select jobs to execute...

[Fri Nov  4 20:45:41 2022]
localrule contig_selector:
    input: results/45_SRF/contig_summary_45_SRF.tsv, results/45_SRF/contigs/virome.contigs.filtered.fasta, results/45_SRF/enough_filtered_virome_contigs.txt
    output: results/45_SRF/contigs/true.mvome.fasta, results/45_SRF/contigs/true.virome.fasta
    log: results/45_SRF/log/contig_selector.log
    jobid: 21
    reason: Missing output files: results/45_SRF/contigs/true.mvome.fasta, results/45_SRF/contigs/true.virome.fasta; Input files updated by another job: results/45_SRF/enough_filtered_virome_contigs.txt, results/45_SRF/contig_summary_45_SRF.tsv, results/45_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=45_SRF
    resources: tmpdir=/tmp

python scripts/contig_selector.py 45_SRF 2> results/45_SRF/log/contig_selector.log
Activating conda environment: /home/dlueckin/envs/f57ba2b792805d07331ad6f4d9adf21c
[Fri Nov  4 20:46:29 2022]
Finished job 21.
68 of 171 steps (40%) done
Select jobs to execute...

[Fri Nov  4 20:46:29 2022]
rule map_virome_reads_to_mv_contigs:
    input: results/45_SRF/reads/virome.reads1.fastq.gz, results/45_SRF/reads/virome.reads2.fastq.gz, results/45_SRF/contigs/true.mvome.fasta
    output: results/45_SRF/reads/true.mvome.reads1.fq.gz, results/45_SRF/reads/true.mvome.reads2.fq.gz, results/45_SRF/mappings/input_reads_vs_mv_contigs/statsfile.txt
    log: results/45_SRF/log/map_virome_reads_to_mv_contigs.log
    jobid: 20
    reason: Missing output files: results/45_SRF/reads/true.mvome.reads2.fq.gz, results/45_SRF/reads/true.mvome.reads1.fq.gz; Input files updated by another job: results/45_SRF/contigs/true.mvome.fasta
    wildcards: sample=45_SRF
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/45_SRF/mappings/input_reads_vs_mv_contigs/

        if [[ -s results/45_SRF/contigs/true.mvome.fasta && -s results/45_SRF/reads/virome.reads1.fastq.gz && -s results/45_SRF/reads/virome.reads2.fastq.gz ]]; then
            # the input contig file is NOT empty
            bbmap.sh in=results/45_SRF/reads/virome.reads1.fastq.gz in2=results/45_SRF/reads/virome.reads2.fastq.gz             ref=results/45_SRF/contigs/true.mvome.fasta             outm=results/45_SRF/reads/true.mvome.reads1.fq.gz outm2=results/45_SRF/reads/true.mvome.reads2.fq.gz             statsfile=results/45_SRF/mappings/input_reads_vs_mv_contigs/statsfile.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/45_SRF/reads/true.mvome.reads1.fq.gz results/45_SRF/reads/true.mvome.reads2.fq.gz results/45_SRF/mappings/input_reads_vs_mv_contigs/statsfile.txt
        fi
        
Submitted job 20 with external jobid 'Submitted batch job 34776'.

[Fri Nov  4 20:46:29 2022]
rule map_virome_reads_to_true_virome_contigs:
    input: results/45_SRF/reads/virome.reads1.fastq.gz, results/45_SRF/reads/virome.reads2.fastq.gz, results/45_SRF/contigs/true.virome.fasta
    output: results/45_SRF/reads/true.virome.reads1.fq.gz, results/45_SRF/reads/true.virome.reads2.fq.gz, results/45_SRF/mappings/input_reads_vs_true_virome_contigs/scafstats.txt, results/45_SRF/mappings/input_reads_vs_true_virome_contigs/rpkm.txt
    log: results/45_SRF/log/map_virome_reads_vs_true_virome_contigs.log
    jobid: 31
    reason: Missing output files: results/45_SRF/reads/true.virome.reads1.fq.gz, results/45_SRF/reads/true.virome.reads2.fq.gz; Input files updated by another job: results/45_SRF/contigs/true.virome.fasta
    wildcards: sample=45_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        mkdir -p results/45_SRF/mappings/input_reads_vs_true_virome_contigs/

        if [[ -s results/45_SRF/contigs/true.virome.fasta && -s results/45_SRF/reads/virome.reads1.fastq.gz && -s results/45_SRF/reads/virome.reads2.fastq.gz ]]; then
            # the input contig file or the reads are NOT empty
            bbmap.sh in=results/45_SRF/reads/virome.reads1.fastq.gz in2=results/45_SRF/reads/virome.reads2.fastq.gz             ref=results/45_SRF/contigs/true.virome.fasta             outm=results/45_SRF/reads/true.virome.reads1.fq.gz outm2=results/45_SRF/reads/true.virome.reads2.fq.gz             scafstats=results/45_SRF/mappings/input_reads_vs_true_virome_contigs/scafstats.txt             rpkm=results/45_SRF/mappings/input_reads_vs_true_virome_contigs/rpkm.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/45_SRF/reads/true.virome.reads1.fq.gz results/45_SRF/reads/true.virome.reads2.fq.gz results/45_SRF/mappings/input_reads_vs_true_virome_contigs/scafstats.txt results/45_SRF/mappings/input_reads_vs_true_virome_contigs/rpkm.txt
        fi        
        
Submitted job 31 with external jobid 'Submitted batch job 34777'.
[Fri Nov  4 21:00:19 2022]
Finished job 71.
69 of 171 steps (40%) done
Select jobs to execute...

[Fri Nov  4 21:00:19 2022]
rule viromeQC_mvome:
    input: results/52_DCM/reads/true.mvome.reads1.fq.gz, results/52_DCM/reads/true.mvome.reads2.fq.gz
    output: results/52_DCM/viromeQC/mvome_QC.tsv
    jobid: 83
    reason: Missing output files: results/52_DCM/viromeQC/mvome_QC.tsv; Input files updated by another job: results/52_DCM/reads/true.mvome.reads1.fq.gz, results/52_DCM/reads/true.mvome.reads2.fq.gz
    wildcards: sample=52_DCM
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/52_DCM/viromeQC

        if [ -s results/52_DCM/reads/true.mvome.reads1.fq.gz ]; then
            python /home/dlueckin/bin/viromeqc/viromeQC.py -w environmental             --diamond_threads 8 --bowtie2_threads 8             -i results/52_DCM/reads/true.mvome.reads1.fq.gz results/52_DCM/reads/true.mvome.reads2.fq.gz             -o results/52_DCM/viromeQC/mvome_QC.tsv
        else
            touch results/52_DCM/viromeQC/mvome_QC.tsv
        fi
        
Submitted job 83 with external jobid 'Submitted batch job 34780'.

[Fri Nov  4 21:00:19 2022]
rule map_mv_positive_reads_to_metagenome:
    input: results/52_DCM/reads/true.mvome.reads1.fq.gz, results/52_DCM/reads/true.mvome.reads2.fq.gz, results/52_DCM/contigs/metagenome.contigs.filtered.fasta.gz
    output: results/52_DCM/mappings/mvome_positive_vs_metagenome/rpkm.txt, results/52_DCM/mappings/mvome_positive_vs_metagenome/scafstats.txt
    jobid: 85
    reason: Missing output files: results/52_DCM/mappings/mvome_positive_vs_metagenome/scafstats.txt; Input files updated by another job: results/52_DCM/reads/true.mvome.reads1.fq.gz, results/52_DCM/reads/true.mvome.reads2.fq.gz
    wildcards: sample=52_DCM
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        mkdir -p results/52_DCM/mappings/mvome_positive_vs_metagenome/

        if [[ -s results/52_DCM/contigs/metagenome.contigs.filtered.fasta.gz && -s results/52_DCM/reads/true.mvome.reads1.fq.gz && -s results/52_DCM/reads/true.mvome.reads2.fq.gz ]]; then
            # the input contig file or the reads are NOT empty
            bbmap.sh in=results/52_DCM/reads/true.mvome.reads1.fq.gz in2=results/52_DCM/reads/true.mvome.reads2.fq.gz             ref=results/52_DCM/contigs/metagenome.contigs.filtered.fasta.gz             scafstats=results/52_DCM/mappings/mvome_positive_vs_metagenome/scafstats.txt             rpkm=results/52_DCM/mappings/mvome_positive_vs_metagenome/rpkm.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/52_DCM/mappings/mvome_positive_vs_metagenome/scafstats.txt results/52_DCM/mappings/mvome_positive_vs_metagenome/rpkm.txt
        fi      
        
Submitted job 85 with external jobid 'Submitted batch job 34781'.

[Fri Nov  4 21:00:19 2022]
rule kaiju_mvome:
    input: results/52_DCM/reads/true.mvome.reads1.fq.gz, results/52_DCM/reads/true.mvome.reads2.fq.gz
    output: results/52_DCM/kaiju/mvome.out, results/52_DCM/kaiju/mvome_summary.tsv
    jobid: 70
    reason: Missing output files: results/52_DCM/kaiju/mvome_summary.tsv; Input files updated by another job: results/52_DCM/reads/true.mvome.reads1.fq.gz, results/52_DCM/reads/true.mvome.reads2.fq.gz
    wildcards: sample=52_DCM
    resources: tmpdir=/tmp, mem=250G, time=12:00:00, ntasks=8


        mkdir -p results/52_DCM/kaiju
        
        if [ -s results/52_DCM/reads/true.mvome.reads1.fq.gz ]; then
            kaiju-multi -z 8             -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -f /bioinf/home/dlueckin/dbs/kaiju_db_nr/kaiju_db_nr.fmi             -i results/52_DCM/reads/true.mvome.reads1.fq.gz             -j results/52_DCM/reads/true.mvome.reads2.fq.gz             -o results/52_DCM/kaiju/mvome.out

            kaiju2table -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -n /bioinf/home/dlueckin/dbs/kaiju_db_nr/names.dmp             -r genus -o results/52_DCM/kaiju/mvome_summary.tsv results/52_DCM/kaiju/mvome.out
        else
            touch results/52_DCM/kaiju/mvome.out results/52_DCM/kaiju/mvome_summary.tsv
        fi
        
Submitted job 70 with external jobid 'Submitted batch job 34782'.
[Fri Nov  4 21:01:03 2022]
Finished job 85.
70 of 171 steps (41%) done
[Fri Nov  4 21:02:53 2022]
Finished job 88.
71 of 171 steps (42%) done
Select jobs to execute...

[Fri Nov  4 21:02:53 2022]
rule viromeQC_mvome:
    input: results/52_SRF/reads/true.mvome.reads1.fq.gz, results/52_SRF/reads/true.mvome.reads2.fq.gz
    output: results/52_SRF/viromeQC/mvome_QC.tsv
    jobid: 100
    reason: Missing output files: results/52_SRF/viromeQC/mvome_QC.tsv; Input files updated by another job: results/52_SRF/reads/true.mvome.reads2.fq.gz, results/52_SRF/reads/true.mvome.reads1.fq.gz
    wildcards: sample=52_SRF
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/52_SRF/viromeQC

        if [ -s results/52_SRF/reads/true.mvome.reads1.fq.gz ]; then
            python /home/dlueckin/bin/viromeqc/viromeQC.py -w environmental             --diamond_threads 8 --bowtie2_threads 8             -i results/52_SRF/reads/true.mvome.reads1.fq.gz results/52_SRF/reads/true.mvome.reads2.fq.gz             -o results/52_SRF/viromeQC/mvome_QC.tsv
        else
            touch results/52_SRF/viromeQC/mvome_QC.tsv
        fi
        
Submitted job 100 with external jobid 'Submitted batch job 34783'.

[Fri Nov  4 21:02:53 2022]
rule map_mv_positive_reads_to_metagenome:
    input: results/52_SRF/reads/true.mvome.reads1.fq.gz, results/52_SRF/reads/true.mvome.reads2.fq.gz, results/52_SRF/contigs/metagenome.contigs.filtered.fasta.gz
    output: results/52_SRF/mappings/mvome_positive_vs_metagenome/rpkm.txt, results/52_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt
    jobid: 102
    reason: Missing output files: results/52_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt; Input files updated by another job: results/52_SRF/reads/true.mvome.reads2.fq.gz, results/52_SRF/reads/true.mvome.reads1.fq.gz
    wildcards: sample=52_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        mkdir -p results/52_SRF/mappings/mvome_positive_vs_metagenome/

        if [[ -s results/52_SRF/contigs/metagenome.contigs.filtered.fasta.gz && -s results/52_SRF/reads/true.mvome.reads1.fq.gz && -s results/52_SRF/reads/true.mvome.reads2.fq.gz ]]; then
            # the input contig file or the reads are NOT empty
            bbmap.sh in=results/52_SRF/reads/true.mvome.reads1.fq.gz in2=results/52_SRF/reads/true.mvome.reads2.fq.gz             ref=results/52_SRF/contigs/metagenome.contigs.filtered.fasta.gz             scafstats=results/52_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt             rpkm=results/52_SRF/mappings/mvome_positive_vs_metagenome/rpkm.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/52_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt results/52_SRF/mappings/mvome_positive_vs_metagenome/rpkm.txt
        fi      
        
Submitted job 102 with external jobid 'Submitted batch job 34784'.

[Fri Nov  4 21:02:53 2022]
rule kaiju_mvome:
    input: results/52_SRF/reads/true.mvome.reads1.fq.gz, results/52_SRF/reads/true.mvome.reads2.fq.gz
    output: results/52_SRF/kaiju/mvome.out, results/52_SRF/kaiju/mvome_summary.tsv
    jobid: 87
    reason: Missing output files: results/52_SRF/kaiju/mvome_summary.tsv; Input files updated by another job: results/52_SRF/reads/true.mvome.reads2.fq.gz, results/52_SRF/reads/true.mvome.reads1.fq.gz
    wildcards: sample=52_SRF
    resources: tmpdir=/tmp, mem=250G, time=12:00:00, ntasks=8


        mkdir -p results/52_SRF/kaiju
        
        if [ -s results/52_SRF/reads/true.mvome.reads1.fq.gz ]; then
            kaiju-multi -z 8             -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -f /bioinf/home/dlueckin/dbs/kaiju_db_nr/kaiju_db_nr.fmi             -i results/52_SRF/reads/true.mvome.reads1.fq.gz             -j results/52_SRF/reads/true.mvome.reads2.fq.gz             -o results/52_SRF/kaiju/mvome.out

            kaiju2table -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -n /bioinf/home/dlueckin/dbs/kaiju_db_nr/names.dmp             -r genus -o results/52_SRF/kaiju/mvome_summary.tsv results/52_SRF/kaiju/mvome.out
        else
            touch results/52_SRF/kaiju/mvome.out results/52_SRF/kaiju/mvome_summary.tsv
        fi
        
Submitted job 87 with external jobid 'Submitted batch job 34785'.
[Fri Nov  4 21:03:37 2022]
Finished job 102.
72 of 171 steps (42%) done
[Fri Nov  4 21:03:37 2022]
Finished job 83.
73 of 171 steps (43%) done
[Fri Nov  4 21:03:48 2022]
Finished job 70.
74 of 171 steps (43%) done
[Fri Nov  4 21:08:57 2022]
Finished job 100.
75 of 171 steps (44%) done
[Fri Nov  4 21:09:41 2022]
Finished job 87.
76 of 171 steps (44%) done
[Fri Nov  4 21:12:22 2022]
Finished job 20.
77 of 171 steps (45%) done
Select jobs to execute...

[Fri Nov  4 21:12:22 2022]
rule map_mv_positive_reads_to_metagenome:
    input: results/45_SRF/reads/true.mvome.reads1.fq.gz, results/45_SRF/reads/true.mvome.reads2.fq.gz, results/45_SRF/contigs/metagenome.contigs.filtered.fasta.gz
    output: results/45_SRF/mappings/mvome_positive_vs_metagenome/rpkm.txt, results/45_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt
    jobid: 34
    reason: Missing output files: results/45_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt; Input files updated by another job: results/45_SRF/reads/true.mvome.reads2.fq.gz, results/45_SRF/reads/true.mvome.reads1.fq.gz
    wildcards: sample=45_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        mkdir -p results/45_SRF/mappings/mvome_positive_vs_metagenome/

        if [[ -s results/45_SRF/contigs/metagenome.contigs.filtered.fasta.gz && -s results/45_SRF/reads/true.mvome.reads1.fq.gz && -s results/45_SRF/reads/true.mvome.reads2.fq.gz ]]; then
            # the input contig file or the reads are NOT empty
            bbmap.sh in=results/45_SRF/reads/true.mvome.reads1.fq.gz in2=results/45_SRF/reads/true.mvome.reads2.fq.gz             ref=results/45_SRF/contigs/metagenome.contigs.filtered.fasta.gz             scafstats=results/45_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt             rpkm=results/45_SRF/mappings/mvome_positive_vs_metagenome/rpkm.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/45_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt results/45_SRF/mappings/mvome_positive_vs_metagenome/rpkm.txt
        fi      
        
Submitted job 34 with external jobid 'Submitted batch job 34786'.

[Fri Nov  4 21:12:22 2022]
rule kaiju_mvome:
    input: results/45_SRF/reads/true.mvome.reads1.fq.gz, results/45_SRF/reads/true.mvome.reads2.fq.gz
    output: results/45_SRF/kaiju/mvome.out, results/45_SRF/kaiju/mvome_summary.tsv
    jobid: 19
    reason: Missing output files: results/45_SRF/kaiju/mvome_summary.tsv; Input files updated by another job: results/45_SRF/reads/true.mvome.reads2.fq.gz, results/45_SRF/reads/true.mvome.reads1.fq.gz
    wildcards: sample=45_SRF
    resources: tmpdir=/tmp, mem=250G, time=12:00:00, ntasks=8


        mkdir -p results/45_SRF/kaiju
        
        if [ -s results/45_SRF/reads/true.mvome.reads1.fq.gz ]; then
            kaiju-multi -z 8             -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -f /bioinf/home/dlueckin/dbs/kaiju_db_nr/kaiju_db_nr.fmi             -i results/45_SRF/reads/true.mvome.reads1.fq.gz             -j results/45_SRF/reads/true.mvome.reads2.fq.gz             -o results/45_SRF/kaiju/mvome.out

            kaiju2table -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -n /bioinf/home/dlueckin/dbs/kaiju_db_nr/names.dmp             -r genus -o results/45_SRF/kaiju/mvome_summary.tsv results/45_SRF/kaiju/mvome.out
        else
            touch results/45_SRF/kaiju/mvome.out results/45_SRF/kaiju/mvome_summary.tsv
        fi
        
Submitted job 19 with external jobid 'Submitted batch job 34787'.

[Fri Nov  4 21:12:22 2022]
rule viromeQC_mvome:
    input: results/45_SRF/reads/true.mvome.reads1.fq.gz, results/45_SRF/reads/true.mvome.reads2.fq.gz
    output: results/45_SRF/viromeQC/mvome_QC.tsv
    jobid: 32
    reason: Missing output files: results/45_SRF/viromeQC/mvome_QC.tsv; Input files updated by another job: results/45_SRF/reads/true.mvome.reads2.fq.gz, results/45_SRF/reads/true.mvome.reads1.fq.gz
    wildcards: sample=45_SRF
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/45_SRF/viromeQC

        if [ -s results/45_SRF/reads/true.mvome.reads1.fq.gz ]; then
            python /home/dlueckin/bin/viromeqc/viromeQC.py -w environmental             --diamond_threads 8 --bowtie2_threads 8             -i results/45_SRF/reads/true.mvome.reads1.fq.gz results/45_SRF/reads/true.mvome.reads2.fq.gz             -o results/45_SRF/viromeQC/mvome_QC.tsv
        else
            touch results/45_SRF/viromeQC/mvome_QC.tsv
        fi
        
Submitted job 32 with external jobid 'Submitted batch job 34788'.
[Fri Nov  4 21:14:00 2022]
Finished job 34.
78 of 171 steps (46%) done
[Fri Nov  4 21:21:20 2022]
Finished job 19.
79 of 171 steps (46%) done
[Fri Nov  4 21:26:02 2022]
Finished job 32.
80 of 171 steps (47%) done
[Fri Nov  4 21:58:44 2022]
Finished job 8.
81 of 171 steps (47%) done
Select jobs to execute...

[Fri Nov  4 21:58:44 2022]
rule checkv:
    input: results/42_SRF/vs2/final-viral-combined.fa
    output: results/42_SRF/checkv/contamination.tsv
    jobid: 10
    reason: Missing output files: results/42_SRF/checkv/contamination.tsv; Input files updated by another job: results/42_SRF/vs2/final-viral-combined.fa
    wildcards: sample=42_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        checkv end_to_end results/42_SRF/vs2/final-viral-combined.fa results/42_SRF/checkv         -t 8 -d /home/dlueckin/dbs/checkv-db-v1.0
        
Submitted job 10 with external jobid 'Submitted batch job 34789'.
[Fri Nov  4 22:09:25 2022]
Finished job 150.
82 of 171 steps (48%) done
Select jobs to execute...

[Fri Nov  4 22:09:25 2022]
rule kaiju_virome:
    input: results/58_DCM/reads/true.virome.reads1.fq.gz, results/58_DCM/reads/true.virome.reads2.fq.gz
    output: results/58_DCM/kaiju/virome.out, results/58_DCM/kaiju/virome_summary.tsv
    jobid: 149
    reason: Missing output files: results/58_DCM/kaiju/virome_summary.tsv; Input files updated by another job: results/58_DCM/reads/true.virome.reads2.fq.gz, results/58_DCM/reads/true.virome.reads1.fq.gz
    wildcards: sample=58_DCM
    resources: tmpdir=/tmp, mem=250G, time=12:00:00, ntasks=8


        mkdir -p results/58_DCM/kaiju
        
        if [ -s results/58_DCM/reads/true.virome.reads1.fq.gz ]; then
            kaiju-multi -z 8             -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -f /bioinf/home/dlueckin/dbs/kaiju_db_nr/kaiju_db_nr.fmi             -i results/58_DCM/reads/true.virome.reads1.fq.gz             -j results/58_DCM/reads/true.virome.reads2.fq.gz             -o results/58_DCM/kaiju/virome.out

            kaiju2table -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -n /bioinf/home/dlueckin/dbs/kaiju_db_nr/names.dmp             -r genus -o results/58_DCM/kaiju/virome_summary.tsv results/58_DCM/kaiju/virome.out
        else
            touch results/58_DCM/kaiju/virome.out results/58_DCM/kaiju/virome_summary.tsv
        fi
        
Submitted job 149 with external jobid 'Submitted batch job 34790'.

[Fri Nov  4 22:09:25 2022]
rule viromeQC_virome:
    input: results/58_DCM/reads/true.virome.reads1.fq.gz, results/58_DCM/reads/true.virome.reads2.fq.gz
    output: results/58_DCM/viromeQC/virome_QC.tsv
    jobid: 152
    reason: Missing output files: results/58_DCM/viromeQC/virome_QC.tsv; Input files updated by another job: results/58_DCM/reads/true.virome.reads2.fq.gz, results/58_DCM/reads/true.virome.reads1.fq.gz
    wildcards: sample=58_DCM
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/58_DCM/viromeQC

        if [ -s results/58_DCM/reads/true.virome.reads1.fq.gz ]; then
            python /home/dlueckin/bin/viromeqc/viromeQC.py -w environmental             --diamond_threads 8 --bowtie2_threads 8             -i results/58_DCM/reads/true.virome.reads1.fq.gz results/58_DCM/reads/true.virome.reads2.fq.gz             -o results/58_DCM/viromeQC/virome_QC.tsv
        else
            touch results/58_DCM/viromeQC/virome_QC.tsv
        fi
        
Submitted job 152 with external jobid 'Submitted batch job 34791'.
[Fri Nov  4 22:31:06 2022]
Finished job 82.
83 of 171 steps (49%) done
Select jobs to execute...

[Fri Nov  4 22:31:06 2022]
rule viromeQC_virome:
    input: results/52_DCM/reads/true.virome.reads1.fq.gz, results/52_DCM/reads/true.virome.reads2.fq.gz
    output: results/52_DCM/viromeQC/virome_QC.tsv
    jobid: 84
    reason: Missing output files: results/52_DCM/viromeQC/virome_QC.tsv; Input files updated by another job: results/52_DCM/reads/true.virome.reads2.fq.gz, results/52_DCM/reads/true.virome.reads1.fq.gz
    wildcards: sample=52_DCM
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/52_DCM/viromeQC

        if [ -s results/52_DCM/reads/true.virome.reads1.fq.gz ]; then
            python /home/dlueckin/bin/viromeqc/viromeQC.py -w environmental             --diamond_threads 8 --bowtie2_threads 8             -i results/52_DCM/reads/true.virome.reads1.fq.gz results/52_DCM/reads/true.virome.reads2.fq.gz             -o results/52_DCM/viromeQC/virome_QC.tsv
        else
            touch results/52_DCM/viromeQC/virome_QC.tsv
        fi
        
Submitted job 84 with external jobid 'Submitted batch job 34792'.

[Fri Nov  4 22:31:06 2022]
rule kaiju_virome:
    input: results/52_DCM/reads/true.virome.reads1.fq.gz, results/52_DCM/reads/true.virome.reads2.fq.gz
    output: results/52_DCM/kaiju/virome.out, results/52_DCM/kaiju/virome_summary.tsv
    jobid: 81
    reason: Missing output files: results/52_DCM/kaiju/virome_summary.tsv; Input files updated by another job: results/52_DCM/reads/true.virome.reads2.fq.gz, results/52_DCM/reads/true.virome.reads1.fq.gz
    wildcards: sample=52_DCM
    resources: tmpdir=/tmp, mem=250G, time=12:00:00, ntasks=8


        mkdir -p results/52_DCM/kaiju
        
        if [ -s results/52_DCM/reads/true.virome.reads1.fq.gz ]; then
            kaiju-multi -z 8             -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -f /bioinf/home/dlueckin/dbs/kaiju_db_nr/kaiju_db_nr.fmi             -i results/52_DCM/reads/true.virome.reads1.fq.gz             -j results/52_DCM/reads/true.virome.reads2.fq.gz             -o results/52_DCM/kaiju/virome.out

            kaiju2table -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -n /bioinf/home/dlueckin/dbs/kaiju_db_nr/names.dmp             -r genus -o results/52_DCM/kaiju/virome_summary.tsv results/52_DCM/kaiju/virome.out
        else
            touch results/52_DCM/kaiju/virome.out results/52_DCM/kaiju/virome_summary.tsv
        fi
        
Submitted job 81 with external jobid 'Submitted batch job 34793'.
[Fri Nov  4 22:32:44 2022]
Finished job 110.
84 of 171 steps (49%) done
Select jobs to execute...

[Fri Nov  4 22:32:44 2022]
rule checkv:
    input: results/56_MES/vs2/final-viral-combined.fa
    output: results/56_MES/checkv/contamination.tsv
    jobid: 112
    reason: Missing output files: results/56_MES/checkv/contamination.tsv; Input files updated by another job: results/56_MES/vs2/final-viral-combined.fa
    wildcards: sample=56_MES
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        checkv end_to_end results/56_MES/vs2/final-viral-combined.fa results/56_MES/checkv         -t 8 -d /home/dlueckin/dbs/checkv-db-v1.0
        
Submitted job 112 with external jobid 'Submitted batch job 34794'.
[Fri Nov  4 22:41:00 2022]
Finished job 99.
85 of 171 steps (50%) done
Select jobs to execute...

[Fri Nov  4 22:41:00 2022]
rule viromeQC_virome:
    input: results/52_SRF/reads/true.virome.reads1.fq.gz, results/52_SRF/reads/true.virome.reads2.fq.gz
    output: results/52_SRF/viromeQC/virome_QC.tsv
    jobid: 101
    reason: Missing output files: results/52_SRF/viromeQC/virome_QC.tsv; Input files updated by another job: results/52_SRF/reads/true.virome.reads2.fq.gz, results/52_SRF/reads/true.virome.reads1.fq.gz
    wildcards: sample=52_SRF
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/52_SRF/viromeQC

        if [ -s results/52_SRF/reads/true.virome.reads1.fq.gz ]; then
            python /home/dlueckin/bin/viromeqc/viromeQC.py -w environmental             --diamond_threads 8 --bowtie2_threads 8             -i results/52_SRF/reads/true.virome.reads1.fq.gz results/52_SRF/reads/true.virome.reads2.fq.gz             -o results/52_SRF/viromeQC/virome_QC.tsv
        else
            touch results/52_SRF/viromeQC/virome_QC.tsv
        fi
        
Submitted job 101 with external jobid 'Submitted batch job 34795'.

[Fri Nov  4 22:41:00 2022]
rule kaiju_virome:
    input: results/52_SRF/reads/true.virome.reads1.fq.gz, results/52_SRF/reads/true.virome.reads2.fq.gz
    output: results/52_SRF/kaiju/virome.out, results/52_SRF/kaiju/virome_summary.tsv
    jobid: 98
    reason: Missing output files: results/52_SRF/kaiju/virome_summary.tsv; Input files updated by another job: results/52_SRF/reads/true.virome.reads2.fq.gz, results/52_SRF/reads/true.virome.reads1.fq.gz
    wildcards: sample=52_SRF
    resources: tmpdir=/tmp, mem=250G, time=12:00:00, ntasks=8


        mkdir -p results/52_SRF/kaiju
        
        if [ -s results/52_SRF/reads/true.virome.reads1.fq.gz ]; then
            kaiju-multi -z 8             -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -f /bioinf/home/dlueckin/dbs/kaiju_db_nr/kaiju_db_nr.fmi             -i results/52_SRF/reads/true.virome.reads1.fq.gz             -j results/52_SRF/reads/true.virome.reads2.fq.gz             -o results/52_SRF/kaiju/virome.out

            kaiju2table -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -n /bioinf/home/dlueckin/dbs/kaiju_db_nr/names.dmp             -r genus -o results/52_SRF/kaiju/virome_summary.tsv results/52_SRF/kaiju/virome.out
        else
            touch results/52_SRF/kaiju/virome.out results/52_SRF/kaiju/virome_summary.tsv
        fi
        
Submitted job 98 with external jobid 'Submitted batch job 34796'.
[Fri Nov  4 22:43:44 2022]
Finished job 10.
86 of 171 steps (50%) done
Select jobs to execute...

[Fri Nov  4 22:43:44 2022]
localrule vs2_summary:
    input: results/42_SRF/vs2/final-viral-score.tsv, results/42_SRF/checkv/contamination.tsv
    output: results/42_SRF/vs2_final_report.tsv
    jobid: 7
    reason: Missing output files: results/42_SRF/vs2_final_report.tsv; Input files updated by another job: results/42_SRF/checkv/contamination.tsv, results/42_SRF/vs2/final-viral-score.tsv
    wildcards: sample=42_SRF
    resources: tmpdir=/tmp

Rscript scripts/analyze_vs2_output.R results/42_SRF/vs2/final-viral-score.tsv results/42_SRF/checkv/contamination.tsv results/42_SRF/vs2_final_report.tsv
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
[1] "Quick Summary"

manual curation       not viral      true viral 
              8             489           17306 
[Fri Nov  4 22:44:14 2022]
Finished job 7.
87 of 171 steps (51%) done
Select jobs to execute...

[Fri Nov  4 22:44:14 2022]
localrule contig_summary:
    input: results/42_SRF/contigs/virome.contigs.filtered.fasta, results/42_SRF/vs2_final_report.tsv, results/42_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt, results/42_SRF/platon_out/platon_plasmids.log, results/42_SRF/enough_filtered_virome_contigs.txt
    output: results/42_SRF/contig_summary_42_SRF.tsv
    log: results/42_SRF/log/contig_summary.log
    jobid: 5
    reason: Missing output files: results/42_SRF/contig_summary_42_SRF.tsv; Input files updated by another job: results/42_SRF/vs2_final_report.tsv, results/42_SRF/enough_filtered_virome_contigs.txt, results/42_SRF/contigs/virome.contigs.filtered.fasta, results/42_SRF/platon_out/platon_plasmids.log, results/42_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt
    wildcards: sample=42_SRF
    resources: tmpdir=/tmp

Rscript scripts/summarize.R 42_SRF 150000 2> results/42_SRF/log/contig_summary.log
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
[Fri Nov  4 22:44:41 2022]
Finished job 5.
88 of 171 steps (51%) done
Select jobs to execute...

[Fri Nov  4 22:44:41 2022]
localrule contig_selector:
    input: results/42_SRF/contig_summary_42_SRF.tsv, results/42_SRF/contigs/virome.contigs.filtered.fasta, results/42_SRF/enough_filtered_virome_contigs.txt
    output: results/42_SRF/contigs/true.mvome.fasta, results/42_SRF/contigs/true.virome.fasta
    log: results/42_SRF/log/contig_selector.log
    jobid: 4
    reason: Missing output files: results/42_SRF/contigs/true.mvome.fasta, results/42_SRF/contigs/true.virome.fasta; Input files updated by another job: results/42_SRF/contig_summary_42_SRF.tsv, results/42_SRF/enough_filtered_virome_contigs.txt, results/42_SRF/contigs/virome.contigs.filtered.fasta
    wildcards: sample=42_SRF
    resources: tmpdir=/tmp

python scripts/contig_selector.py 42_SRF 2> results/42_SRF/log/contig_selector.log
Activating conda environment: /home/dlueckin/envs/f57ba2b792805d07331ad6f4d9adf21c
[Fri Nov  4 22:45:20 2022]
Finished job 4.
89 of 171 steps (52%) done
Select jobs to execute...

[Fri Nov  4 22:45:21 2022]
rule map_virome_reads_to_mv_contigs:
    input: results/42_SRF/reads/virome.reads1.fastq.gz, results/42_SRF/reads/virome.reads2.fastq.gz, results/42_SRF/contigs/true.mvome.fasta
    output: results/42_SRF/reads/true.mvome.reads1.fq.gz, results/42_SRF/reads/true.mvome.reads2.fq.gz, results/42_SRF/mappings/input_reads_vs_mv_contigs/statsfile.txt
    log: results/42_SRF/log/map_virome_reads_to_mv_contigs.log
    jobid: 3
    reason: Missing output files: results/42_SRF/reads/true.mvome.reads1.fq.gz, results/42_SRF/reads/true.mvome.reads2.fq.gz; Input files updated by another job: results/42_SRF/contigs/true.mvome.fasta
    wildcards: sample=42_SRF
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/42_SRF/mappings/input_reads_vs_mv_contigs/

        if [[ -s results/42_SRF/contigs/true.mvome.fasta && -s results/42_SRF/reads/virome.reads1.fastq.gz && -s results/42_SRF/reads/virome.reads2.fastq.gz ]]; then
            # the input contig file is NOT empty
            bbmap.sh in=results/42_SRF/reads/virome.reads1.fastq.gz in2=results/42_SRF/reads/virome.reads2.fastq.gz             ref=results/42_SRF/contigs/true.mvome.fasta             outm=results/42_SRF/reads/true.mvome.reads1.fq.gz outm2=results/42_SRF/reads/true.mvome.reads2.fq.gz             statsfile=results/42_SRF/mappings/input_reads_vs_mv_contigs/statsfile.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/42_SRF/reads/true.mvome.reads1.fq.gz results/42_SRF/reads/true.mvome.reads2.fq.gz results/42_SRF/mappings/input_reads_vs_mv_contigs/statsfile.txt
        fi
        
Submitted job 3 with external jobid 'Submitted batch job 34797'.

[Fri Nov  4 22:45:21 2022]
rule map_virome_reads_to_true_virome_contigs:
    input: results/42_SRF/reads/virome.reads1.fastq.gz, results/42_SRF/reads/virome.reads2.fastq.gz, results/42_SRF/contigs/true.virome.fasta
    output: results/42_SRF/reads/true.virome.reads1.fq.gz, results/42_SRF/reads/true.virome.reads2.fq.gz, results/42_SRF/mappings/input_reads_vs_true_virome_contigs/scafstats.txt, results/42_SRF/mappings/input_reads_vs_true_virome_contigs/rpkm.txt
    log: results/42_SRF/log/map_virome_reads_vs_true_virome_contigs.log
    jobid: 14
    reason: Missing output files: results/42_SRF/reads/true.virome.reads2.fq.gz, results/42_SRF/reads/true.virome.reads1.fq.gz; Input files updated by another job: results/42_SRF/contigs/true.virome.fasta
    wildcards: sample=42_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        mkdir -p results/42_SRF/mappings/input_reads_vs_true_virome_contigs/

        if [[ -s results/42_SRF/contigs/true.virome.fasta && -s results/42_SRF/reads/virome.reads1.fastq.gz && -s results/42_SRF/reads/virome.reads2.fastq.gz ]]; then
            # the input contig file or the reads are NOT empty
            bbmap.sh in=results/42_SRF/reads/virome.reads1.fastq.gz in2=results/42_SRF/reads/virome.reads2.fastq.gz             ref=results/42_SRF/contigs/true.virome.fasta             outm=results/42_SRF/reads/true.virome.reads1.fq.gz outm2=results/42_SRF/reads/true.virome.reads2.fq.gz             scafstats=results/42_SRF/mappings/input_reads_vs_true_virome_contigs/scafstats.txt             rpkm=results/42_SRF/mappings/input_reads_vs_true_virome_contigs/rpkm.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/42_SRF/reads/true.virome.reads1.fq.gz results/42_SRF/reads/true.virome.reads2.fq.gz results/42_SRF/mappings/input_reads_vs_true_virome_contigs/scafstats.txt results/42_SRF/mappings/input_reads_vs_true_virome_contigs/rpkm.txt
        fi        
        
Submitted job 14 with external jobid 'Submitted batch job 34798'.
[Fri Nov  4 22:47:03 2022]
Finished job 31.
90 of 171 steps (53%) done
Select jobs to execute...

[Fri Nov  4 22:47:03 2022]
rule viromeQC_virome:
    input: results/45_SRF/reads/true.virome.reads1.fq.gz, results/45_SRF/reads/true.virome.reads2.fq.gz
    output: results/45_SRF/viromeQC/virome_QC.tsv
    jobid: 33
    reason: Missing output files: results/45_SRF/viromeQC/virome_QC.tsv; Input files updated by another job: results/45_SRF/reads/true.virome.reads1.fq.gz, results/45_SRF/reads/true.virome.reads2.fq.gz
    wildcards: sample=45_SRF
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/45_SRF/viromeQC

        if [ -s results/45_SRF/reads/true.virome.reads1.fq.gz ]; then
            python /home/dlueckin/bin/viromeqc/viromeQC.py -w environmental             --diamond_threads 8 --bowtie2_threads 8             -i results/45_SRF/reads/true.virome.reads1.fq.gz results/45_SRF/reads/true.virome.reads2.fq.gz             -o results/45_SRF/viromeQC/virome_QC.tsv
        else
            touch results/45_SRF/viromeQC/virome_QC.tsv
        fi
        
Submitted job 33 with external jobid 'Submitted batch job 34799'.

[Fri Nov  4 22:47:03 2022]
rule kaiju_virome:
    input: results/45_SRF/reads/true.virome.reads1.fq.gz, results/45_SRF/reads/true.virome.reads2.fq.gz
    output: results/45_SRF/kaiju/virome.out, results/45_SRF/kaiju/virome_summary.tsv
    jobid: 30
    reason: Missing output files: results/45_SRF/kaiju/virome_summary.tsv; Input files updated by another job: results/45_SRF/reads/true.virome.reads1.fq.gz, results/45_SRF/reads/true.virome.reads2.fq.gz
    wildcards: sample=45_SRF
    resources: tmpdir=/tmp, mem=250G, time=12:00:00, ntasks=8


        mkdir -p results/45_SRF/kaiju
        
        if [ -s results/45_SRF/reads/true.virome.reads1.fq.gz ]; then
            kaiju-multi -z 8             -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -f /bioinf/home/dlueckin/dbs/kaiju_db_nr/kaiju_db_nr.fmi             -i results/45_SRF/reads/true.virome.reads1.fq.gz             -j results/45_SRF/reads/true.virome.reads2.fq.gz             -o results/45_SRF/kaiju/virome.out

            kaiju2table -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -n /bioinf/home/dlueckin/dbs/kaiju_db_nr/names.dmp             -r genus -o results/45_SRF/kaiju/virome_summary.tsv results/45_SRF/kaiju/virome.out
        else
            touch results/45_SRF/kaiju/virome.out results/45_SRF/kaiju/virome_summary.tsv
        fi
        
Submitted job 30 with external jobid 'Submitted batch job 34800'.
[Fri Nov  4 22:48:53 2022]
Finished job 112.
91 of 171 steps (53%) done
Select jobs to execute...

[Fri Nov  4 22:48:53 2022]
localrule vs2_summary:
    input: results/56_MES/vs2/final-viral-score.tsv, results/56_MES/checkv/contamination.tsv
    output: results/56_MES/vs2_final_report.tsv
    jobid: 109
    reason: Missing output files: results/56_MES/vs2_final_report.tsv; Input files updated by another job: results/56_MES/checkv/contamination.tsv, results/56_MES/vs2/final-viral-score.tsv
    wildcards: sample=56_MES
    resources: tmpdir=/tmp

Rscript scripts/analyze_vs2_output.R results/56_MES/vs2/final-viral-score.tsv results/56_MES/checkv/contamination.tsv results/56_MES/vs2_final_report.tsv
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
[1] "Quick Summary"

manual curation       not viral      true viral 
              8             399            7086 
[Fri Nov  4 22:49:10 2022]
Finished job 109.
92 of 171 steps (54%) done
Select jobs to execute...

[Fri Nov  4 22:49:10 2022]
localrule contig_summary:
    input: results/56_MES/contigs/virome.contigs.filtered.fasta, results/56_MES/vs2_final_report.tsv, results/56_MES/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt, results/56_MES/platon_out/platon_plasmids.log, results/56_MES/enough_filtered_virome_contigs.txt
    output: results/56_MES/contig_summary_56_MES.tsv
    log: results/56_MES/log/contig_summary.log
    jobid: 107
    reason: Missing output files: results/56_MES/contig_summary_56_MES.tsv; Input files updated by another job: results/56_MES/contigs/virome.contigs.filtered.fasta, results/56_MES/platon_out/platon_plasmids.log, results/56_MES/enough_filtered_virome_contigs.txt, results/56_MES/vs2_final_report.tsv, results/56_MES/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt
    wildcards: sample=56_MES
    resources: tmpdir=/tmp

Rscript scripts/summarize.R 56_MES 150000 2> results/56_MES/log/contig_summary.log
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
[Fri Nov  4 22:49:43 2022]
Finished job 107.
93 of 171 steps (54%) done
Select jobs to execute...

[Fri Nov  4 22:49:43 2022]
localrule contig_selector:
    input: results/56_MES/contig_summary_56_MES.tsv, results/56_MES/contigs/virome.contigs.filtered.fasta, results/56_MES/enough_filtered_virome_contigs.txt
    output: results/56_MES/contigs/true.mvome.fasta, results/56_MES/contigs/true.virome.fasta
    log: results/56_MES/log/contig_selector.log
    jobid: 106
    reason: Missing output files: results/56_MES/contigs/true.virome.fasta, results/56_MES/contigs/true.mvome.fasta; Input files updated by another job: results/56_MES/contigs/virome.contigs.filtered.fasta, results/56_MES/contig_summary_56_MES.tsv, results/56_MES/enough_filtered_virome_contigs.txt
    wildcards: sample=56_MES
    resources: tmpdir=/tmp

python scripts/contig_selector.py 56_MES 2> results/56_MES/log/contig_selector.log
Activating conda environment: /home/dlueckin/envs/f57ba2b792805d07331ad6f4d9adf21c
[Fri Nov  4 22:50:39 2022]
Finished job 106.
94 of 171 steps (55%) done
Select jobs to execute...

[Fri Nov  4 22:50:39 2022]
rule map_virome_reads_to_true_virome_contigs:
    input: results/56_MES/reads/virome.reads1.fastq.gz, results/56_MES/reads/virome.reads2.fastq.gz, results/56_MES/contigs/true.virome.fasta
    output: results/56_MES/reads/true.virome.reads1.fq.gz, results/56_MES/reads/true.virome.reads2.fq.gz, results/56_MES/mappings/input_reads_vs_true_virome_contigs/scafstats.txt, results/56_MES/mappings/input_reads_vs_true_virome_contigs/rpkm.txt
    log: results/56_MES/log/map_virome_reads_vs_true_virome_contigs.log
    jobid: 116
    reason: Missing output files: results/56_MES/reads/true.virome.reads1.fq.gz, results/56_MES/reads/true.virome.reads2.fq.gz; Input files updated by another job: results/56_MES/contigs/true.virome.fasta
    wildcards: sample=56_MES
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        mkdir -p results/56_MES/mappings/input_reads_vs_true_virome_contigs/

        if [[ -s results/56_MES/contigs/true.virome.fasta && -s results/56_MES/reads/virome.reads1.fastq.gz && -s results/56_MES/reads/virome.reads2.fastq.gz ]]; then
            # the input contig file or the reads are NOT empty
            bbmap.sh in=results/56_MES/reads/virome.reads1.fastq.gz in2=results/56_MES/reads/virome.reads2.fastq.gz             ref=results/56_MES/contigs/true.virome.fasta             outm=results/56_MES/reads/true.virome.reads1.fq.gz outm2=results/56_MES/reads/true.virome.reads2.fq.gz             scafstats=results/56_MES/mappings/input_reads_vs_true_virome_contigs/scafstats.txt             rpkm=results/56_MES/mappings/input_reads_vs_true_virome_contigs/rpkm.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/56_MES/reads/true.virome.reads1.fq.gz results/56_MES/reads/true.virome.reads2.fq.gz results/56_MES/mappings/input_reads_vs_true_virome_contigs/scafstats.txt results/56_MES/mappings/input_reads_vs_true_virome_contigs/rpkm.txt
        fi        
        
Submitted job 116 with external jobid 'Submitted batch job 34801'.

[Fri Nov  4 22:50:39 2022]
rule map_virome_reads_to_mv_contigs:
    input: results/56_MES/reads/virome.reads1.fastq.gz, results/56_MES/reads/virome.reads2.fastq.gz, results/56_MES/contigs/true.mvome.fasta
    output: results/56_MES/reads/true.mvome.reads1.fq.gz, results/56_MES/reads/true.mvome.reads2.fq.gz, results/56_MES/mappings/input_reads_vs_mv_contigs/statsfile.txt
    log: results/56_MES/log/map_virome_reads_to_mv_contigs.log
    jobid: 105
    reason: Missing output files: results/56_MES/reads/true.mvome.reads2.fq.gz, results/56_MES/reads/true.mvome.reads1.fq.gz; Input files updated by another job: results/56_MES/contigs/true.mvome.fasta
    wildcards: sample=56_MES
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/56_MES/mappings/input_reads_vs_mv_contigs/

        if [[ -s results/56_MES/contigs/true.mvome.fasta && -s results/56_MES/reads/virome.reads1.fastq.gz && -s results/56_MES/reads/virome.reads2.fastq.gz ]]; then
            # the input contig file is NOT empty
            bbmap.sh in=results/56_MES/reads/virome.reads1.fastq.gz in2=results/56_MES/reads/virome.reads2.fastq.gz             ref=results/56_MES/contigs/true.mvome.fasta             outm=results/56_MES/reads/true.mvome.reads1.fq.gz outm2=results/56_MES/reads/true.mvome.reads2.fq.gz             statsfile=results/56_MES/mappings/input_reads_vs_mv_contigs/statsfile.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/56_MES/reads/true.mvome.reads1.fq.gz results/56_MES/reads/true.mvome.reads2.fq.gz results/56_MES/mappings/input_reads_vs_mv_contigs/statsfile.txt
        fi
        
Submitted job 105 with external jobid 'Submitted batch job 34802'.
[Fri Nov  4 22:57:52 2022]
Finished job 149.
95 of 171 steps (56%) done
[Fri Nov  4 22:57:54 2022]
Finished job 3.
96 of 171 steps (56%) done
Select jobs to execute...

[Fri Nov  4 22:57:54 2022]
rule kaiju_mvome:
    input: results/42_SRF/reads/true.mvome.reads1.fq.gz, results/42_SRF/reads/true.mvome.reads2.fq.gz
    output: results/42_SRF/kaiju/mvome.out, results/42_SRF/kaiju/mvome_summary.tsv
    jobid: 2
    reason: Missing output files: results/42_SRF/kaiju/mvome_summary.tsv; Input files updated by another job: results/42_SRF/reads/true.mvome.reads1.fq.gz, results/42_SRF/reads/true.mvome.reads2.fq.gz
    wildcards: sample=42_SRF
    resources: tmpdir=/tmp, mem=250G, time=12:00:00, ntasks=8


        mkdir -p results/42_SRF/kaiju
        
        if [ -s results/42_SRF/reads/true.mvome.reads1.fq.gz ]; then
            kaiju-multi -z 8             -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -f /bioinf/home/dlueckin/dbs/kaiju_db_nr/kaiju_db_nr.fmi             -i results/42_SRF/reads/true.mvome.reads1.fq.gz             -j results/42_SRF/reads/true.mvome.reads2.fq.gz             -o results/42_SRF/kaiju/mvome.out

            kaiju2table -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -n /bioinf/home/dlueckin/dbs/kaiju_db_nr/names.dmp             -r genus -o results/42_SRF/kaiju/mvome_summary.tsv results/42_SRF/kaiju/mvome.out
        else
            touch results/42_SRF/kaiju/mvome.out results/42_SRF/kaiju/mvome_summary.tsv
        fi
        
Submitted job 2 with external jobid 'Submitted batch job 34803'.

[Fri Nov  4 22:57:54 2022]
rule viromeQC_mvome:
    input: results/42_SRF/reads/true.mvome.reads1.fq.gz, results/42_SRF/reads/true.mvome.reads2.fq.gz
    output: results/42_SRF/viromeQC/mvome_QC.tsv
    jobid: 15
    reason: Missing output files: results/42_SRF/viromeQC/mvome_QC.tsv; Input files updated by another job: results/42_SRF/reads/true.mvome.reads1.fq.gz, results/42_SRF/reads/true.mvome.reads2.fq.gz
    wildcards: sample=42_SRF
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/42_SRF/viromeQC

        if [ -s results/42_SRF/reads/true.mvome.reads1.fq.gz ]; then
            python /home/dlueckin/bin/viromeqc/viromeQC.py -w environmental             --diamond_threads 8 --bowtie2_threads 8             -i results/42_SRF/reads/true.mvome.reads1.fq.gz results/42_SRF/reads/true.mvome.reads2.fq.gz             -o results/42_SRF/viromeQC/mvome_QC.tsv
        else
            touch results/42_SRF/viromeQC/mvome_QC.tsv
        fi
        
Submitted job 15 with external jobid 'Submitted batch job 34804'.

[Fri Nov  4 22:57:54 2022]
rule map_mv_positive_reads_to_metagenome:
    input: results/42_SRF/reads/true.mvome.reads1.fq.gz, results/42_SRF/reads/true.mvome.reads2.fq.gz, results/42_SRF/contigs/metagenome.contigs.filtered.fasta.gz
    output: results/42_SRF/mappings/mvome_positive_vs_metagenome/rpkm.txt, results/42_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt
    jobid: 17
    reason: Missing output files: results/42_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt; Input files updated by another job: results/42_SRF/reads/true.mvome.reads1.fq.gz, results/42_SRF/reads/true.mvome.reads2.fq.gz
    wildcards: sample=42_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        mkdir -p results/42_SRF/mappings/mvome_positive_vs_metagenome/

        if [[ -s results/42_SRF/contigs/metagenome.contigs.filtered.fasta.gz && -s results/42_SRF/reads/true.mvome.reads1.fq.gz && -s results/42_SRF/reads/true.mvome.reads2.fq.gz ]]; then
            # the input contig file or the reads are NOT empty
            bbmap.sh in=results/42_SRF/reads/true.mvome.reads1.fq.gz in2=results/42_SRF/reads/true.mvome.reads2.fq.gz             ref=results/42_SRF/contigs/metagenome.contigs.filtered.fasta.gz             scafstats=results/42_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt             rpkm=results/42_SRF/mappings/mvome_positive_vs_metagenome/rpkm.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/42_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt results/42_SRF/mappings/mvome_positive_vs_metagenome/rpkm.txt
        fi      
        
Submitted job 17 with external jobid 'Submitted batch job 34805'.
[Fri Nov  4 22:59:33 2022]
Finished job 17.
97 of 171 steps (57%) done
[Fri Nov  4 23:03:34 2022]
Finished job 127.
98 of 171 steps (57%) done
Select jobs to execute...

[Fri Nov  4 23:03:34 2022]
rule checkv:
    input: results/56_SRF/vs2/final-viral-combined.fa
    output: results/56_SRF/checkv/contamination.tsv
    jobid: 129
    reason: Missing output files: results/56_SRF/checkv/contamination.tsv; Input files updated by another job: results/56_SRF/vs2/final-viral-combined.fa
    wildcards: sample=56_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        checkv end_to_end results/56_SRF/vs2/final-viral-combined.fa results/56_SRF/checkv         -t 8 -d /home/dlueckin/dbs/checkv-db-v1.0
        
Submitted job 129 with external jobid 'Submitted batch job 34806'.
[Fri Nov  4 23:06:31 2022]
Finished job 2.
99 of 171 steps (58%) done
[Fri Nov  4 23:10:33 2022]
Finished job 15.
100 of 171 steps (58%) done
[Fri Nov  4 23:12:23 2022]
Finished job 161.
101 of 171 steps (59%) done
Select jobs to execute...

[Fri Nov  4 23:12:23 2022]
rule checkv:
    input: results/62_SRF/vs2/final-viral-combined.fa
    output: results/62_SRF/checkv/contamination.tsv
    jobid: 163
    reason: Missing output files: results/62_SRF/checkv/contamination.tsv; Input files updated by another job: results/62_SRF/vs2/final-viral-combined.fa
    wildcards: sample=62_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        checkv end_to_end results/62_SRF/vs2/final-viral-combined.fa results/62_SRF/checkv         -t 8 -d /home/dlueckin/dbs/checkv-db-v1.0
        
Submitted job 163 with external jobid 'Submitted batch job 34807'.
[Fri Nov  4 23:16:25 2022]
Finished job 152.
102 of 171 steps (60%) done
Select jobs to execute...

[Fri Nov  4 23:16:25 2022]
localrule mviest_plot:
    input: results/58_DCM/kaiju/mvome_summary.tsv, results/58_DCM/kaiju/virome_summary.tsv, results/58_DCM/viromeQC/mvome_QC.tsv, results/58_DCM/viromeQC/virome_QC.tsv, results/58_DCM/contig_summary_58_DCM.tsv, results/58_DCM/mappings/mvome_positive_vs_metagenome/scafstats.txt
    output: results/58_DCM/58_DCM_mviest_plot.png, results/58_DCM/58_DCM_mviest_summary.tsv
    jobid: 137
    reason: Missing output files: results/58_DCM/58_DCM_mviest_plot.png, results/58_DCM/58_DCM_mviest_summary.tsv; Input files updated by another job: results/58_DCM/kaiju/mvome_summary.tsv, results/58_DCM/mappings/mvome_positive_vs_metagenome/scafstats.txt, results/58_DCM/viromeQC/virome_QC.tsv, results/58_DCM/kaiju/virome_summary.tsv, results/58_DCM/viromeQC/mvome_QC.tsv, results/58_DCM/contig_summary_58_DCM.tsv
    wildcards: sample=58_DCM
    resources: tmpdir=/tmp


        Rscript scripts/mviest_plot.R         results/58_DCM/kaiju/mvome_summary.tsv results/58_DCM/kaiju/virome_summary.tsv         results/58_DCM/viromeQC/mvome_QC.tsv results/58_DCM/viromeQC/virome_QC.tsv         results/58_DCM/contig_summary_58_DCM.tsv         results/58_DCM/mappings/mvome_positive_vs_metagenome/scafstats.txt         results/58_DCM/58_DCM_mviest_plot.png
        
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
Selecting by Reads
Selecting by Reads
Selecting by total enrichmnet score
Selecting by total enrichmnet score
[Fri Nov  4 23:16:42 2022]
Finished job 137.
103 of 171 steps (60%) done
[Fri Nov  4 23:30:22 2022]
Finished job 81.
104 of 171 steps (61%) done
[Fri Nov  4 23:33:18 2022]
Finished job 84.
105 of 171 steps (61%) done
Select jobs to execute...

[Fri Nov  4 23:33:18 2022]
localrule mviest_plot:
    input: results/52_DCM/kaiju/mvome_summary.tsv, results/52_DCM/kaiju/virome_summary.tsv, results/52_DCM/viromeQC/mvome_QC.tsv, results/52_DCM/viromeQC/virome_QC.tsv, results/52_DCM/contig_summary_52_DCM.tsv, results/52_DCM/mappings/mvome_positive_vs_metagenome/scafstats.txt
    output: results/52_DCM/52_DCM_mviest_plot.png, results/52_DCM/52_DCM_mviest_summary.tsv
    jobid: 69
    reason: Missing output files: results/52_DCM/52_DCM_mviest_summary.tsv, results/52_DCM/52_DCM_mviest_plot.png; Input files updated by another job: results/52_DCM/viromeQC/mvome_QC.tsv, results/52_DCM/viromeQC/virome_QC.tsv, results/52_DCM/contig_summary_52_DCM.tsv, results/52_DCM/mappings/mvome_positive_vs_metagenome/scafstats.txt, results/52_DCM/kaiju/virome_summary.tsv, results/52_DCM/kaiju/mvome_summary.tsv
    wildcards: sample=52_DCM
    resources: tmpdir=/tmp


        Rscript scripts/mviest_plot.R         results/52_DCM/kaiju/mvome_summary.tsv results/52_DCM/kaiju/virome_summary.tsv         results/52_DCM/viromeQC/mvome_QC.tsv results/52_DCM/viromeQC/virome_QC.tsv         results/52_DCM/contig_summary_52_DCM.tsv         results/52_DCM/mappings/mvome_positive_vs_metagenome/scafstats.txt         results/52_DCM/52_DCM_mviest_plot.png
        
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
Selecting by Reads
Selecting by Reads
Selecting by total enrichmnet score
Selecting by total enrichmnet score
[Fri Nov  4 23:33:35 2022]
Finished job 69.
106 of 171 steps (62%) done
[Fri Nov  4 23:38:59 2022]
Finished job 14.
107 of 171 steps (63%) done
Select jobs to execute...

[Fri Nov  4 23:39:00 2022]
rule kaiju_virome:
    input: results/42_SRF/reads/true.virome.reads1.fq.gz, results/42_SRF/reads/true.virome.reads2.fq.gz
    output: results/42_SRF/kaiju/virome.out, results/42_SRF/kaiju/virome_summary.tsv
    jobid: 13
    reason: Missing output files: results/42_SRF/kaiju/virome_summary.tsv; Input files updated by another job: results/42_SRF/reads/true.virome.reads2.fq.gz, results/42_SRF/reads/true.virome.reads1.fq.gz
    wildcards: sample=42_SRF
    resources: tmpdir=/tmp, mem=250G, time=12:00:00, ntasks=8


        mkdir -p results/42_SRF/kaiju
        
        if [ -s results/42_SRF/reads/true.virome.reads1.fq.gz ]; then
            kaiju-multi -z 8             -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -f /bioinf/home/dlueckin/dbs/kaiju_db_nr/kaiju_db_nr.fmi             -i results/42_SRF/reads/true.virome.reads1.fq.gz             -j results/42_SRF/reads/true.virome.reads2.fq.gz             -o results/42_SRF/kaiju/virome.out

            kaiju2table -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -n /bioinf/home/dlueckin/dbs/kaiju_db_nr/names.dmp             -r genus -o results/42_SRF/kaiju/virome_summary.tsv results/42_SRF/kaiju/virome.out
        else
            touch results/42_SRF/kaiju/virome.out results/42_SRF/kaiju/virome_summary.tsv
        fi
        
Submitted job 13 with external jobid 'Submitted batch job 34816'.

[Fri Nov  4 23:39:00 2022]
rule viromeQC_virome:
    input: results/42_SRF/reads/true.virome.reads1.fq.gz, results/42_SRF/reads/true.virome.reads2.fq.gz
    output: results/42_SRF/viromeQC/virome_QC.tsv
    jobid: 16
    reason: Missing output files: results/42_SRF/viromeQC/virome_QC.tsv; Input files updated by another job: results/42_SRF/reads/true.virome.reads2.fq.gz, results/42_SRF/reads/true.virome.reads1.fq.gz
    wildcards: sample=42_SRF
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/42_SRF/viromeQC

        if [ -s results/42_SRF/reads/true.virome.reads1.fq.gz ]; then
            python /home/dlueckin/bin/viromeqc/viromeQC.py -w environmental             --diamond_threads 8 --bowtie2_threads 8             -i results/42_SRF/reads/true.virome.reads1.fq.gz results/42_SRF/reads/true.virome.reads2.fq.gz             -o results/42_SRF/viromeQC/virome_QC.tsv
        else
            touch results/42_SRF/viromeQC/virome_QC.tsv
        fi
        
Submitted job 16 with external jobid 'Submitted batch job 34817'.
[Fri Nov  4 23:43:56 2022]
Finished job 98.
108 of 171 steps (63%) done
[Fri Nov  4 23:45:37 2022]
Finished job 101.
109 of 171 steps (64%) done
Select jobs to execute...

[Fri Nov  4 23:45:37 2022]
localrule mviest_plot:
    input: results/52_SRF/kaiju/mvome_summary.tsv, results/52_SRF/kaiju/virome_summary.tsv, results/52_SRF/viromeQC/mvome_QC.tsv, results/52_SRF/viromeQC/virome_QC.tsv, results/52_SRF/contig_summary_52_SRF.tsv, results/52_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt
    output: results/52_SRF/52_SRF_mviest_plot.png, results/52_SRF/52_SRF_mviest_summary.tsv
    jobid: 86
    reason: Missing output files: results/52_SRF/52_SRF_mviest_plot.png, results/52_SRF/52_SRF_mviest_summary.tsv; Input files updated by another job: results/52_SRF/kaiju/virome_summary.tsv, results/52_SRF/contig_summary_52_SRF.tsv, results/52_SRF/viromeQC/virome_QC.tsv, results/52_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt, results/52_SRF/kaiju/mvome_summary.tsv, results/52_SRF/viromeQC/mvome_QC.tsv
    wildcards: sample=52_SRF
    resources: tmpdir=/tmp


        Rscript scripts/mviest_plot.R         results/52_SRF/kaiju/mvome_summary.tsv results/52_SRF/kaiju/virome_summary.tsv         results/52_SRF/viromeQC/mvome_QC.tsv results/52_SRF/viromeQC/virome_QC.tsv         results/52_SRF/contig_summary_52_SRF.tsv         results/52_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt         results/52_SRF/52_SRF_mviest_plot.png
        
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
Selecting by Reads
Selecting by Reads
Selecting by total enrichmnet score
Selecting by total enrichmnet score
[Fri Nov  4 23:45:54 2022]
Finished job 86.
110 of 171 steps (64%) done
[Fri Nov  4 23:55:17 2022]
Finished job 30.
111 of 171 steps (65%) done
[Sat Nov  5 00:00:58 2022]
Finished job 13.
112 of 171 steps (65%) done
[Sat Nov  5 00:03:38 2022]
Finished job 129.
113 of 171 steps (66%) done
Select jobs to execute...

[Sat Nov  5 00:03:38 2022]
localrule vs2_summary:
    input: results/56_SRF/vs2/final-viral-score.tsv, results/56_SRF/checkv/contamination.tsv
    output: results/56_SRF/vs2_final_report.tsv
    jobid: 126
    reason: Missing output files: results/56_SRF/vs2_final_report.tsv; Input files updated by another job: results/56_SRF/vs2/final-viral-score.tsv, results/56_SRF/checkv/contamination.tsv
    wildcards: sample=56_SRF
    resources: tmpdir=/tmp

Rscript scripts/analyze_vs2_output.R results/56_SRF/vs2/final-viral-score.tsv results/56_SRF/checkv/contamination.tsv results/56_SRF/vs2_final_report.tsv
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
[1] "Quick Summary"

manual curation       not viral      true viral 
             18             752           24329 
[Sat Nov  5 00:04:25 2022]
Finished job 126.
114 of 171 steps (67%) done
Select jobs to execute...

[Sat Nov  5 00:04:25 2022]
localrule contig_summary:
    input: results/56_SRF/contigs/virome.contigs.filtered.fasta, results/56_SRF/vs2_final_report.tsv, results/56_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt, results/56_SRF/platon_out/platon_plasmids.log, results/56_SRF/enough_filtered_virome_contigs.txt
    output: results/56_SRF/contig_summary_56_SRF.tsv
    log: results/56_SRF/log/contig_summary.log
    jobid: 124
    reason: Missing output files: results/56_SRF/contig_summary_56_SRF.tsv; Input files updated by another job: results/56_SRF/vs2_final_report.tsv, results/56_SRF/enough_filtered_virome_contigs.txt, results/56_SRF/platon_out/platon_plasmids.log, results/56_SRF/contigs/virome.contigs.filtered.fasta, results/56_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt
    wildcards: sample=56_SRF
    resources: tmpdir=/tmp

Rscript scripts/summarize.R 56_SRF 150000 2> results/56_SRF/log/contig_summary.log
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
[Sat Nov  5 00:04:55 2022]
Finished job 124.
115 of 171 steps (67%) done
Select jobs to execute...

[Sat Nov  5 00:04:55 2022]
localrule contig_selector:
    input: results/56_SRF/contig_summary_56_SRF.tsv, results/56_SRF/contigs/virome.contigs.filtered.fasta, results/56_SRF/enough_filtered_virome_contigs.txt
    output: results/56_SRF/contigs/true.mvome.fasta, results/56_SRF/contigs/true.virome.fasta
    log: results/56_SRF/log/contig_selector.log
    jobid: 123
    reason: Missing output files: results/56_SRF/contigs/true.virome.fasta, results/56_SRF/contigs/true.mvome.fasta; Input files updated by another job: results/56_SRF/enough_filtered_virome_contigs.txt, results/56_SRF/contigs/virome.contigs.filtered.fasta, results/56_SRF/contig_summary_56_SRF.tsv
    wildcards: sample=56_SRF
    resources: tmpdir=/tmp

python scripts/contig_selector.py 56_SRF 2> results/56_SRF/log/contig_selector.log
Activating conda environment: /home/dlueckin/envs/f57ba2b792805d07331ad6f4d9adf21c
[Sat Nov  5 00:06:08 2022]
Finished job 123.
116 of 171 steps (68%) done
Select jobs to execute...

[Sat Nov  5 00:06:08 2022]
rule map_virome_reads_to_mv_contigs:
    input: results/56_SRF/reads/virome.reads1.fastq.gz, results/56_SRF/reads/virome.reads2.fastq.gz, results/56_SRF/contigs/true.mvome.fasta
    output: results/56_SRF/reads/true.mvome.reads1.fq.gz, results/56_SRF/reads/true.mvome.reads2.fq.gz, results/56_SRF/mappings/input_reads_vs_mv_contigs/statsfile.txt
    log: results/56_SRF/log/map_virome_reads_to_mv_contigs.log
    jobid: 122
    reason: Missing output files: results/56_SRF/reads/true.mvome.reads1.fq.gz, results/56_SRF/reads/true.mvome.reads2.fq.gz; Input files updated by another job: results/56_SRF/contigs/true.mvome.fasta
    wildcards: sample=56_SRF
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/56_SRF/mappings/input_reads_vs_mv_contigs/

        if [[ -s results/56_SRF/contigs/true.mvome.fasta && -s results/56_SRF/reads/virome.reads1.fastq.gz && -s results/56_SRF/reads/virome.reads2.fastq.gz ]]; then
            # the input contig file is NOT empty
            bbmap.sh in=results/56_SRF/reads/virome.reads1.fastq.gz in2=results/56_SRF/reads/virome.reads2.fastq.gz             ref=results/56_SRF/contigs/true.mvome.fasta             outm=results/56_SRF/reads/true.mvome.reads1.fq.gz outm2=results/56_SRF/reads/true.mvome.reads2.fq.gz             statsfile=results/56_SRF/mappings/input_reads_vs_mv_contigs/statsfile.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/56_SRF/reads/true.mvome.reads1.fq.gz results/56_SRF/reads/true.mvome.reads2.fq.gz results/56_SRF/mappings/input_reads_vs_mv_contigs/statsfile.txt
        fi
        
Submitted job 122 with external jobid 'Submitted batch job 34821'.

[Sat Nov  5 00:06:08 2022]
rule map_virome_reads_to_true_virome_contigs:
    input: results/56_SRF/reads/virome.reads1.fastq.gz, results/56_SRF/reads/virome.reads2.fastq.gz, results/56_SRF/contigs/true.virome.fasta
    output: results/56_SRF/reads/true.virome.reads1.fq.gz, results/56_SRF/reads/true.virome.reads2.fq.gz, results/56_SRF/mappings/input_reads_vs_true_virome_contigs/scafstats.txt, results/56_SRF/mappings/input_reads_vs_true_virome_contigs/rpkm.txt
    log: results/56_SRF/log/map_virome_reads_vs_true_virome_contigs.log
    jobid: 133
    reason: Missing output files: results/56_SRF/reads/true.virome.reads1.fq.gz, results/56_SRF/reads/true.virome.reads2.fq.gz; Input files updated by another job: results/56_SRF/contigs/true.virome.fasta
    wildcards: sample=56_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        mkdir -p results/56_SRF/mappings/input_reads_vs_true_virome_contigs/

        if [[ -s results/56_SRF/contigs/true.virome.fasta && -s results/56_SRF/reads/virome.reads1.fastq.gz && -s results/56_SRF/reads/virome.reads2.fastq.gz ]]; then
            # the input contig file or the reads are NOT empty
            bbmap.sh in=results/56_SRF/reads/virome.reads1.fastq.gz in2=results/56_SRF/reads/virome.reads2.fastq.gz             ref=results/56_SRF/contigs/true.virome.fasta             outm=results/56_SRF/reads/true.virome.reads1.fq.gz outm2=results/56_SRF/reads/true.virome.reads2.fq.gz             scafstats=results/56_SRF/mappings/input_reads_vs_true_virome_contigs/scafstats.txt             rpkm=results/56_SRF/mappings/input_reads_vs_true_virome_contigs/rpkm.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/56_SRF/reads/true.virome.reads1.fq.gz results/56_SRF/reads/true.virome.reads2.fq.gz results/56_SRF/mappings/input_reads_vs_true_virome_contigs/scafstats.txt results/56_SRF/mappings/input_reads_vs_true_virome_contigs/rpkm.txt
        fi        
        
Submitted job 133 with external jobid 'Submitted batch job 34822'.
[Sat Nov  5 00:06:38 2022]
Finished job 33.
117 of 171 steps (68%) done
Select jobs to execute...

[Sat Nov  5 00:06:38 2022]
localrule mviest_plot:
    input: results/45_SRF/kaiju/mvome_summary.tsv, results/45_SRF/kaiju/virome_summary.tsv, results/45_SRF/viromeQC/mvome_QC.tsv, results/45_SRF/viromeQC/virome_QC.tsv, results/45_SRF/contig_summary_45_SRF.tsv, results/45_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt
    output: results/45_SRF/45_SRF_mviest_plot.png, results/45_SRF/45_SRF_mviest_summary.tsv
    jobid: 18
    reason: Missing output files: results/45_SRF/45_SRF_mviest_plot.png, results/45_SRF/45_SRF_mviest_summary.tsv; Input files updated by another job: results/45_SRF/kaiju/virome_summary.tsv, results/45_SRF/contig_summary_45_SRF.tsv, results/45_SRF/viromeQC/mvome_QC.tsv, results/45_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt, results/45_SRF/viromeQC/virome_QC.tsv, results/45_SRF/kaiju/mvome_summary.tsv
    wildcards: sample=45_SRF
    resources: tmpdir=/tmp


        Rscript scripts/mviest_plot.R         results/45_SRF/kaiju/mvome_summary.tsv results/45_SRF/kaiju/virome_summary.tsv         results/45_SRF/viromeQC/mvome_QC.tsv results/45_SRF/viromeQC/virome_QC.tsv         results/45_SRF/contig_summary_45_SRF.tsv         results/45_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt         results/45_SRF/45_SRF_mviest_plot.png
        
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
Selecting by Reads
Selecting by Reads
Selecting by total enrichmnet score
Selecting by total enrichmnet score
[Sat Nov  5 00:06:55 2022]
Finished job 18.
118 of 171 steps (69%) done
[Sat Nov  5 00:08:18 2022]
Finished job 16.
119 of 171 steps (70%) done
Select jobs to execute...

[Sat Nov  5 00:08:18 2022]
localrule mviest_plot:
    input: results/42_SRF/kaiju/mvome_summary.tsv, results/42_SRF/kaiju/virome_summary.tsv, results/42_SRF/viromeQC/mvome_QC.tsv, results/42_SRF/viromeQC/virome_QC.tsv, results/42_SRF/contig_summary_42_SRF.tsv, results/42_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt
    output: results/42_SRF/42_SRF_mviest_plot.png, results/42_SRF/42_SRF_mviest_summary.tsv
    jobid: 1
    reason: Missing output files: results/42_SRF/42_SRF_mviest_summary.tsv, results/42_SRF/42_SRF_mviest_plot.png; Input files updated by another job: results/42_SRF/kaiju/virome_summary.tsv, results/42_SRF/contig_summary_42_SRF.tsv, results/42_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt, results/42_SRF/viromeQC/virome_QC.tsv, results/42_SRF/viromeQC/mvome_QC.tsv, results/42_SRF/kaiju/mvome_summary.tsv
    wildcards: sample=42_SRF
    resources: tmpdir=/tmp


        Rscript scripts/mviest_plot.R         results/42_SRF/kaiju/mvome_summary.tsv results/42_SRF/kaiju/virome_summary.tsv         results/42_SRF/viromeQC/mvome_QC.tsv results/42_SRF/viromeQC/virome_QC.tsv         results/42_SRF/contig_summary_42_SRF.tsv         results/42_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt         results/42_SRF/42_SRF_mviest_plot.png
        
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
Selecting by Reads
Selecting by Reads
Selecting by total enrichmnet score
Selecting by total enrichmnet score
[Sat Nov  5 00:08:36 2022]
Finished job 1.
120 of 171 steps (70%) done
[Sat Nov  5 00:21:59 2022]
Finished job 163.
121 of 171 steps (71%) done
Select jobs to execute...

[Sat Nov  5 00:21:59 2022]
localrule vs2_summary:
    input: results/62_SRF/vs2/final-viral-score.tsv, results/62_SRF/checkv/contamination.tsv
    output: results/62_SRF/vs2_final_report.tsv
    jobid: 160
    reason: Missing output files: results/62_SRF/vs2_final_report.tsv; Input files updated by another job: results/62_SRF/checkv/contamination.tsv, results/62_SRF/vs2/final-viral-score.tsv
    wildcards: sample=62_SRF
    resources: tmpdir=/tmp

Rscript scripts/analyze_vs2_output.R results/62_SRF/vs2/final-viral-score.tsv results/62_SRF/checkv/contamination.tsv results/62_SRF/vs2_final_report.tsv
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
[1] "Quick Summary"

manual curation       not viral      true viral 
             16             724           26172 
[Sat Nov  5 00:22:56 2022]
Finished job 160.
122 of 171 steps (71%) done
Select jobs to execute...

[Sat Nov  5 00:22:56 2022]
localrule contig_summary:
    input: results/62_SRF/contigs/virome.contigs.filtered.fasta, results/62_SRF/vs2_final_report.tsv, results/62_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt, results/62_SRF/platon_out/platon_plasmids.log, results/62_SRF/enough_filtered_virome_contigs.txt
    output: results/62_SRF/contig_summary_62_SRF.tsv
    log: results/62_SRF/log/contig_summary.log
    jobid: 158
    reason: Missing output files: results/62_SRF/contig_summary_62_SRF.tsv; Input files updated by another job: results/62_SRF/dvf/virome.contigs.filtered.fasta_gt1bp_dvfpred.txt, results/62_SRF/contigs/virome.contigs.filtered.fasta, results/62_SRF/vs2_final_report.tsv, results/62_SRF/enough_filtered_virome_contigs.txt, results/62_SRF/platon_out/platon_plasmids.log
    wildcards: sample=62_SRF
    resources: tmpdir=/tmp

Rscript scripts/summarize.R 62_SRF 150000 2> results/62_SRF/log/contig_summary.log
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
[Sat Nov  5 00:23:23 2022]
Finished job 158.
123 of 171 steps (72%) done
Select jobs to execute...

[Sat Nov  5 00:23:23 2022]
localrule contig_selector:
    input: results/62_SRF/contig_summary_62_SRF.tsv, results/62_SRF/contigs/virome.contigs.filtered.fasta, results/62_SRF/enough_filtered_virome_contigs.txt
    output: results/62_SRF/contigs/true.mvome.fasta, results/62_SRF/contigs/true.virome.fasta
    log: results/62_SRF/log/contig_selector.log
    jobid: 157
    reason: Missing output files: results/62_SRF/contigs/true.mvome.fasta, results/62_SRF/contigs/true.virome.fasta; Input files updated by another job: results/62_SRF/contig_summary_62_SRF.tsv, results/62_SRF/contigs/virome.contigs.filtered.fasta, results/62_SRF/enough_filtered_virome_contigs.txt
    wildcards: sample=62_SRF
    resources: tmpdir=/tmp

python scripts/contig_selector.py 62_SRF 2> results/62_SRF/log/contig_selector.log
Activating conda environment: /home/dlueckin/envs/f57ba2b792805d07331ad6f4d9adf21c
[Sat Nov  5 00:24:34 2022]
Finished job 157.
124 of 171 steps (73%) done
Select jobs to execute...

[Sat Nov  5 00:24:34 2022]
rule map_virome_reads_to_true_virome_contigs:
    input: results/62_SRF/reads/virome.reads1.fastq.gz, results/62_SRF/reads/virome.reads2.fastq.gz, results/62_SRF/contigs/true.virome.fasta
    output: results/62_SRF/reads/true.virome.reads1.fq.gz, results/62_SRF/reads/true.virome.reads2.fq.gz, results/62_SRF/mappings/input_reads_vs_true_virome_contigs/scafstats.txt, results/62_SRF/mappings/input_reads_vs_true_virome_contigs/rpkm.txt
    log: results/62_SRF/log/map_virome_reads_vs_true_virome_contigs.log
    jobid: 167
    reason: Missing output files: results/62_SRF/reads/true.virome.reads1.fq.gz, results/62_SRF/reads/true.virome.reads2.fq.gz; Input files updated by another job: results/62_SRF/contigs/true.virome.fasta
    wildcards: sample=62_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        mkdir -p results/62_SRF/mappings/input_reads_vs_true_virome_contigs/

        if [[ -s results/62_SRF/contigs/true.virome.fasta && -s results/62_SRF/reads/virome.reads1.fastq.gz && -s results/62_SRF/reads/virome.reads2.fastq.gz ]]; then
            # the input contig file or the reads are NOT empty
            bbmap.sh in=results/62_SRF/reads/virome.reads1.fastq.gz in2=results/62_SRF/reads/virome.reads2.fastq.gz             ref=results/62_SRF/contigs/true.virome.fasta             outm=results/62_SRF/reads/true.virome.reads1.fq.gz outm2=results/62_SRF/reads/true.virome.reads2.fq.gz             scafstats=results/62_SRF/mappings/input_reads_vs_true_virome_contigs/scafstats.txt             rpkm=results/62_SRF/mappings/input_reads_vs_true_virome_contigs/rpkm.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/62_SRF/reads/true.virome.reads1.fq.gz results/62_SRF/reads/true.virome.reads2.fq.gz results/62_SRF/mappings/input_reads_vs_true_virome_contigs/scafstats.txt results/62_SRF/mappings/input_reads_vs_true_virome_contigs/rpkm.txt
        fi        
        
Submitted job 167 with external jobid 'Submitted batch job 34825'.

[Sat Nov  5 00:24:34 2022]
rule map_virome_reads_to_mv_contigs:
    input: results/62_SRF/reads/virome.reads1.fastq.gz, results/62_SRF/reads/virome.reads2.fastq.gz, results/62_SRF/contigs/true.mvome.fasta
    output: results/62_SRF/reads/true.mvome.reads1.fq.gz, results/62_SRF/reads/true.mvome.reads2.fq.gz, results/62_SRF/mappings/input_reads_vs_mv_contigs/statsfile.txt
    log: results/62_SRF/log/map_virome_reads_to_mv_contigs.log
    jobid: 156
    reason: Missing output files: results/62_SRF/reads/true.mvome.reads1.fq.gz, results/62_SRF/reads/true.mvome.reads2.fq.gz; Input files updated by another job: results/62_SRF/contigs/true.mvome.fasta
    wildcards: sample=62_SRF
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/62_SRF/mappings/input_reads_vs_mv_contigs/

        if [[ -s results/62_SRF/contigs/true.mvome.fasta && -s results/62_SRF/reads/virome.reads1.fastq.gz && -s results/62_SRF/reads/virome.reads2.fastq.gz ]]; then
            # the input contig file is NOT empty
            bbmap.sh in=results/62_SRF/reads/virome.reads1.fastq.gz in2=results/62_SRF/reads/virome.reads2.fastq.gz             ref=results/62_SRF/contigs/true.mvome.fasta             outm=results/62_SRF/reads/true.mvome.reads1.fq.gz outm2=results/62_SRF/reads/true.mvome.reads2.fq.gz             statsfile=results/62_SRF/mappings/input_reads_vs_mv_contigs/statsfile.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/62_SRF/reads/true.mvome.reads1.fq.gz results/62_SRF/reads/true.mvome.reads2.fq.gz results/62_SRF/mappings/input_reads_vs_mv_contigs/statsfile.txt
        fi
        
Submitted job 156 with external jobid 'Submitted batch job 34826'.
[Sat Nov  5 00:32:10 2022]
Finished job 122.
125 of 171 steps (73%) done
Select jobs to execute...

[Sat Nov  5 00:32:10 2022]
rule kaiju_mvome:
    input: results/56_SRF/reads/true.mvome.reads1.fq.gz, results/56_SRF/reads/true.mvome.reads2.fq.gz
    output: results/56_SRF/kaiju/mvome.out, results/56_SRF/kaiju/mvome_summary.tsv
    jobid: 121
    reason: Missing output files: results/56_SRF/kaiju/mvome_summary.tsv; Input files updated by another job: results/56_SRF/reads/true.mvome.reads1.fq.gz, results/56_SRF/reads/true.mvome.reads2.fq.gz
    wildcards: sample=56_SRF
    resources: tmpdir=/tmp, mem=250G, time=12:00:00, ntasks=8


        mkdir -p results/56_SRF/kaiju
        
        if [ -s results/56_SRF/reads/true.mvome.reads1.fq.gz ]; then
            kaiju-multi -z 8             -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -f /bioinf/home/dlueckin/dbs/kaiju_db_nr/kaiju_db_nr.fmi             -i results/56_SRF/reads/true.mvome.reads1.fq.gz             -j results/56_SRF/reads/true.mvome.reads2.fq.gz             -o results/56_SRF/kaiju/mvome.out

            kaiju2table -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -n /bioinf/home/dlueckin/dbs/kaiju_db_nr/names.dmp             -r genus -o results/56_SRF/kaiju/mvome_summary.tsv results/56_SRF/kaiju/mvome.out
        else
            touch results/56_SRF/kaiju/mvome.out results/56_SRF/kaiju/mvome_summary.tsv
        fi
        
Submitted job 121 with external jobid 'Submitted batch job 34828'.

[Sat Nov  5 00:32:10 2022]
rule viromeQC_mvome:
    input: results/56_SRF/reads/true.mvome.reads1.fq.gz, results/56_SRF/reads/true.mvome.reads2.fq.gz
    output: results/56_SRF/viromeQC/mvome_QC.tsv
    jobid: 134
    reason: Missing output files: results/56_SRF/viromeQC/mvome_QC.tsv; Input files updated by another job: results/56_SRF/reads/true.mvome.reads1.fq.gz, results/56_SRF/reads/true.mvome.reads2.fq.gz
    wildcards: sample=56_SRF
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/56_SRF/viromeQC

        if [ -s results/56_SRF/reads/true.mvome.reads1.fq.gz ]; then
            python /home/dlueckin/bin/viromeqc/viromeQC.py -w environmental             --diamond_threads 8 --bowtie2_threads 8             -i results/56_SRF/reads/true.mvome.reads1.fq.gz results/56_SRF/reads/true.mvome.reads2.fq.gz             -o results/56_SRF/viromeQC/mvome_QC.tsv
        else
            touch results/56_SRF/viromeQC/mvome_QC.tsv
        fi
        
Submitted job 134 with external jobid 'Submitted batch job 34829'.

[Sat Nov  5 00:32:10 2022]
rule map_mv_positive_reads_to_metagenome:
    input: results/56_SRF/reads/true.mvome.reads1.fq.gz, results/56_SRF/reads/true.mvome.reads2.fq.gz, results/56_SRF/contigs/metagenome.contigs.filtered.fasta.gz
    output: results/56_SRF/mappings/mvome_positive_vs_metagenome/rpkm.txt, results/56_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt
    jobid: 136
    reason: Missing output files: results/56_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt; Input files updated by another job: results/56_SRF/reads/true.mvome.reads1.fq.gz, results/56_SRF/reads/true.mvome.reads2.fq.gz
    wildcards: sample=56_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        mkdir -p results/56_SRF/mappings/mvome_positive_vs_metagenome/

        if [[ -s results/56_SRF/contigs/metagenome.contigs.filtered.fasta.gz && -s results/56_SRF/reads/true.mvome.reads1.fq.gz && -s results/56_SRF/reads/true.mvome.reads2.fq.gz ]]; then
            # the input contig file or the reads are NOT empty
            bbmap.sh in=results/56_SRF/reads/true.mvome.reads1.fq.gz in2=results/56_SRF/reads/true.mvome.reads2.fq.gz             ref=results/56_SRF/contigs/metagenome.contigs.filtered.fasta.gz             scafstats=results/56_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt             rpkm=results/56_SRF/mappings/mvome_positive_vs_metagenome/rpkm.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/56_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt results/56_SRF/mappings/mvome_positive_vs_metagenome/rpkm.txt
        fi      
        
Submitted job 136 with external jobid 'Submitted batch job 34830'.
[Sat Nov  5 00:33:50 2022]
Finished job 136.
126 of 171 steps (74%) done
[Sat Nov  5 00:40:30 2022]
Finished job 121.
127 of 171 steps (74%) done
[Sat Nov  5 00:44:11 2022]
Finished job 156.
128 of 171 steps (75%) done
Select jobs to execute...

[Sat Nov  5 00:44:11 2022]
rule viromeQC_mvome:
    input: results/62_SRF/reads/true.mvome.reads1.fq.gz, results/62_SRF/reads/true.mvome.reads2.fq.gz
    output: results/62_SRF/viromeQC/mvome_QC.tsv
    jobid: 168
    reason: Missing output files: results/62_SRF/viromeQC/mvome_QC.tsv; Input files updated by another job: results/62_SRF/reads/true.mvome.reads1.fq.gz, results/62_SRF/reads/true.mvome.reads2.fq.gz
    wildcards: sample=62_SRF
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/62_SRF/viromeQC

        if [ -s results/62_SRF/reads/true.mvome.reads1.fq.gz ]; then
            python /home/dlueckin/bin/viromeqc/viromeQC.py -w environmental             --diamond_threads 8 --bowtie2_threads 8             -i results/62_SRF/reads/true.mvome.reads1.fq.gz results/62_SRF/reads/true.mvome.reads2.fq.gz             -o results/62_SRF/viromeQC/mvome_QC.tsv
        else
            touch results/62_SRF/viromeQC/mvome_QC.tsv
        fi
        
Submitted job 168 with external jobid 'Submitted batch job 34832'.

[Sat Nov  5 00:44:11 2022]
rule kaiju_mvome:
    input: results/62_SRF/reads/true.mvome.reads1.fq.gz, results/62_SRF/reads/true.mvome.reads2.fq.gz
    output: results/62_SRF/kaiju/mvome.out, results/62_SRF/kaiju/mvome_summary.tsv
    jobid: 155
    reason: Missing output files: results/62_SRF/kaiju/mvome_summary.tsv; Input files updated by another job: results/62_SRF/reads/true.mvome.reads1.fq.gz, results/62_SRF/reads/true.mvome.reads2.fq.gz
    wildcards: sample=62_SRF
    resources: tmpdir=/tmp, mem=250G, time=12:00:00, ntasks=8


        mkdir -p results/62_SRF/kaiju
        
        if [ -s results/62_SRF/reads/true.mvome.reads1.fq.gz ]; then
            kaiju-multi -z 8             -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -f /bioinf/home/dlueckin/dbs/kaiju_db_nr/kaiju_db_nr.fmi             -i results/62_SRF/reads/true.mvome.reads1.fq.gz             -j results/62_SRF/reads/true.mvome.reads2.fq.gz             -o results/62_SRF/kaiju/mvome.out

            kaiju2table -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -n /bioinf/home/dlueckin/dbs/kaiju_db_nr/names.dmp             -r genus -o results/62_SRF/kaiju/mvome_summary.tsv results/62_SRF/kaiju/mvome.out
        else
            touch results/62_SRF/kaiju/mvome.out results/62_SRF/kaiju/mvome_summary.tsv
        fi
        
Submitted job 155 with external jobid 'Submitted batch job 34833'.

[Sat Nov  5 00:44:11 2022]
rule map_mv_positive_reads_to_metagenome:
    input: results/62_SRF/reads/true.mvome.reads1.fq.gz, results/62_SRF/reads/true.mvome.reads2.fq.gz, results/62_SRF/contigs/metagenome.contigs.filtered.fasta.gz
    output: results/62_SRF/mappings/mvome_positive_vs_metagenome/rpkm.txt, results/62_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt
    jobid: 170
    reason: Missing output files: results/62_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt; Input files updated by another job: results/62_SRF/reads/true.mvome.reads1.fq.gz, results/62_SRF/reads/true.mvome.reads2.fq.gz
    wildcards: sample=62_SRF
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        mkdir -p results/62_SRF/mappings/mvome_positive_vs_metagenome/

        if [[ -s results/62_SRF/contigs/metagenome.contigs.filtered.fasta.gz && -s results/62_SRF/reads/true.mvome.reads1.fq.gz && -s results/62_SRF/reads/true.mvome.reads2.fq.gz ]]; then
            # the input contig file or the reads are NOT empty
            bbmap.sh in=results/62_SRF/reads/true.mvome.reads1.fq.gz in2=results/62_SRF/reads/true.mvome.reads2.fq.gz             ref=results/62_SRF/contigs/metagenome.contigs.filtered.fasta.gz             scafstats=results/62_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt             rpkm=results/62_SRF/mappings/mvome_positive_vs_metagenome/rpkm.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/62_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt results/62_SRF/mappings/mvome_positive_vs_metagenome/rpkm.txt
        fi      
        
Submitted job 170 with external jobid 'Submitted batch job 34834'.
[Sat Nov  5 00:44:51 2022]
Finished job 170.
129 of 171 steps (75%) done
[Sat Nov  5 00:46:31 2022]
Finished job 134.
130 of 171 steps (76%) done
[Sat Nov  5 00:49:11 2022]
Finished job 155.
131 of 171 steps (77%) done
[Sat Nov  5 00:49:21 2022]
Finished job 168.
132 of 171 steps (77%) done
[Sat Nov  5 01:26:03 2022]
Finished job 116.
133 of 171 steps (78%) done
Select jobs to execute...

[Sat Nov  5 01:26:03 2022]
rule kaiju_virome:
    input: results/56_MES/reads/true.virome.reads1.fq.gz, results/56_MES/reads/true.virome.reads2.fq.gz
    output: results/56_MES/kaiju/virome.out, results/56_MES/kaiju/virome_summary.tsv
    jobid: 115
    reason: Missing output files: results/56_MES/kaiju/virome_summary.tsv; Input files updated by another job: results/56_MES/reads/true.virome.reads2.fq.gz, results/56_MES/reads/true.virome.reads1.fq.gz
    wildcards: sample=56_MES
    resources: tmpdir=/tmp, mem=250G, time=12:00:00, ntasks=8


        mkdir -p results/56_MES/kaiju
        
        if [ -s results/56_MES/reads/true.virome.reads1.fq.gz ]; then
            kaiju-multi -z 8             -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -f /bioinf/home/dlueckin/dbs/kaiju_db_nr/kaiju_db_nr.fmi             -i results/56_MES/reads/true.virome.reads1.fq.gz             -j results/56_MES/reads/true.virome.reads2.fq.gz             -o results/56_MES/kaiju/virome.out

            kaiju2table -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -n /bioinf/home/dlueckin/dbs/kaiju_db_nr/names.dmp             -r genus -o results/56_MES/kaiju/virome_summary.tsv results/56_MES/kaiju/virome.out
        else
            touch results/56_MES/kaiju/virome.out results/56_MES/kaiju/virome_summary.tsv
        fi
        
Submitted job 115 with external jobid 'Submitted batch job 34839'.

[Sat Nov  5 01:26:03 2022]
rule viromeQC_virome:
    input: results/56_MES/reads/true.virome.reads1.fq.gz, results/56_MES/reads/true.virome.reads2.fq.gz
    output: results/56_MES/viromeQC/virome_QC.tsv
    jobid: 118
    reason: Missing output files: results/56_MES/viromeQC/virome_QC.tsv; Input files updated by another job: results/56_MES/reads/true.virome.reads2.fq.gz, results/56_MES/reads/true.virome.reads1.fq.gz
    wildcards: sample=56_MES
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/56_MES/viromeQC

        if [ -s results/56_MES/reads/true.virome.reads1.fq.gz ]; then
            python /home/dlueckin/bin/viromeqc/viromeQC.py -w environmental             --diamond_threads 8 --bowtie2_threads 8             -i results/56_MES/reads/true.virome.reads1.fq.gz results/56_MES/reads/true.virome.reads2.fq.gz             -o results/56_MES/viromeQC/virome_QC.tsv
        else
            touch results/56_MES/viromeQC/virome_QC.tsv
        fi
        
Submitted job 118 with external jobid 'Submitted batch job 34840'.
[Sat Nov  5 02:06:46 2022]
Finished job 133.
134 of 171 steps (78%) done
Select jobs to execute...

[Sat Nov  5 02:06:46 2022]
rule kaiju_virome:
    input: results/56_SRF/reads/true.virome.reads1.fq.gz, results/56_SRF/reads/true.virome.reads2.fq.gz
    output: results/56_SRF/kaiju/virome.out, results/56_SRF/kaiju/virome_summary.tsv
    jobid: 132
    reason: Missing output files: results/56_SRF/kaiju/virome_summary.tsv; Input files updated by another job: results/56_SRF/reads/true.virome.reads1.fq.gz, results/56_SRF/reads/true.virome.reads2.fq.gz
    wildcards: sample=56_SRF
    resources: tmpdir=/tmp, mem=250G, time=12:00:00, ntasks=8


        mkdir -p results/56_SRF/kaiju
        
        if [ -s results/56_SRF/reads/true.virome.reads1.fq.gz ]; then
            kaiju-multi -z 8             -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -f /bioinf/home/dlueckin/dbs/kaiju_db_nr/kaiju_db_nr.fmi             -i results/56_SRF/reads/true.virome.reads1.fq.gz             -j results/56_SRF/reads/true.virome.reads2.fq.gz             -o results/56_SRF/kaiju/virome.out

            kaiju2table -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -n /bioinf/home/dlueckin/dbs/kaiju_db_nr/names.dmp             -r genus -o results/56_SRF/kaiju/virome_summary.tsv results/56_SRF/kaiju/virome.out
        else
            touch results/56_SRF/kaiju/virome.out results/56_SRF/kaiju/virome_summary.tsv
        fi
        
Submitted job 132 with external jobid 'Submitted batch job 34845'.

[Sat Nov  5 02:06:46 2022]
rule viromeQC_virome:
    input: results/56_SRF/reads/true.virome.reads1.fq.gz, results/56_SRF/reads/true.virome.reads2.fq.gz
    output: results/56_SRF/viromeQC/virome_QC.tsv
    jobid: 135
    reason: Missing output files: results/56_SRF/viromeQC/virome_QC.tsv; Input files updated by another job: results/56_SRF/reads/true.virome.reads1.fq.gz, results/56_SRF/reads/true.virome.reads2.fq.gz
    wildcards: sample=56_SRF
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/56_SRF/viromeQC

        if [ -s results/56_SRF/reads/true.virome.reads1.fq.gz ]; then
            python /home/dlueckin/bin/viromeqc/viromeQC.py -w environmental             --diamond_threads 8 --bowtie2_threads 8             -i results/56_SRF/reads/true.virome.reads1.fq.gz results/56_SRF/reads/true.virome.reads2.fq.gz             -o results/56_SRF/viromeQC/virome_QC.tsv
        else
            touch results/56_SRF/viromeQC/virome_QC.tsv
        fi
        
Submitted job 135 with external jobid 'Submitted batch job 34846'.
[Sat Nov  5 02:06:46 2022]
Finished job 115.
135 of 171 steps (79%) done
[Sat Nov  5 02:10:27 2022]
Finished job 105.
136 of 171 steps (80%) done
Select jobs to execute...

[Sat Nov  5 02:10:27 2022]
rule kaiju_mvome:
    input: results/56_MES/reads/true.mvome.reads1.fq.gz, results/56_MES/reads/true.mvome.reads2.fq.gz
    output: results/56_MES/kaiju/mvome.out, results/56_MES/kaiju/mvome_summary.tsv
    jobid: 104
    reason: Missing output files: results/56_MES/kaiju/mvome_summary.tsv; Input files updated by another job: results/56_MES/reads/true.mvome.reads2.fq.gz, results/56_MES/reads/true.mvome.reads1.fq.gz
    wildcards: sample=56_MES
    resources: tmpdir=/tmp, mem=250G, time=12:00:00, ntasks=8


        mkdir -p results/56_MES/kaiju
        
        if [ -s results/56_MES/reads/true.mvome.reads1.fq.gz ]; then
            kaiju-multi -z 8             -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -f /bioinf/home/dlueckin/dbs/kaiju_db_nr/kaiju_db_nr.fmi             -i results/56_MES/reads/true.mvome.reads1.fq.gz             -j results/56_MES/reads/true.mvome.reads2.fq.gz             -o results/56_MES/kaiju/mvome.out

            kaiju2table -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -n /bioinf/home/dlueckin/dbs/kaiju_db_nr/names.dmp             -r genus -o results/56_MES/kaiju/mvome_summary.tsv results/56_MES/kaiju/mvome.out
        else
            touch results/56_MES/kaiju/mvome.out results/56_MES/kaiju/mvome_summary.tsv
        fi
        
Submitted job 104 with external jobid 'Submitted batch job 34848'.

[Sat Nov  5 02:10:27 2022]
rule viromeQC_mvome:
    input: results/56_MES/reads/true.mvome.reads1.fq.gz, results/56_MES/reads/true.mvome.reads2.fq.gz
    output: results/56_MES/viromeQC/mvome_QC.tsv
    jobid: 117
    reason: Missing output files: results/56_MES/viromeQC/mvome_QC.tsv; Input files updated by another job: results/56_MES/reads/true.mvome.reads2.fq.gz, results/56_MES/reads/true.mvome.reads1.fq.gz
    wildcards: sample=56_MES
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/56_MES/viromeQC

        if [ -s results/56_MES/reads/true.mvome.reads1.fq.gz ]; then
            python /home/dlueckin/bin/viromeqc/viromeQC.py -w environmental             --diamond_threads 8 --bowtie2_threads 8             -i results/56_MES/reads/true.mvome.reads1.fq.gz results/56_MES/reads/true.mvome.reads2.fq.gz             -o results/56_MES/viromeQC/mvome_QC.tsv
        else
            touch results/56_MES/viromeQC/mvome_QC.tsv
        fi
        
Submitted job 117 with external jobid 'Submitted batch job 34849'.

[Sat Nov  5 02:10:27 2022]
rule map_mv_positive_reads_to_metagenome:
    input: results/56_MES/reads/true.mvome.reads1.fq.gz, results/56_MES/reads/true.mvome.reads2.fq.gz, results/56_MES/contigs/metagenome.contigs.filtered.fasta.gz
    output: results/56_MES/mappings/mvome_positive_vs_metagenome/rpkm.txt, results/56_MES/mappings/mvome_positive_vs_metagenome/scafstats.txt
    jobid: 119
    reason: Missing output files: results/56_MES/mappings/mvome_positive_vs_metagenome/scafstats.txt; Input files updated by another job: results/56_MES/reads/true.mvome.reads2.fq.gz, results/56_MES/reads/true.mvome.reads1.fq.gz
    wildcards: sample=56_MES
    resources: tmpdir=/tmp, mem=100G, time=24:00:00, ntasks=8


        mkdir -p results/56_MES/mappings/mvome_positive_vs_metagenome/

        if [[ -s results/56_MES/contigs/metagenome.contigs.filtered.fasta.gz && -s results/56_MES/reads/true.mvome.reads1.fq.gz && -s results/56_MES/reads/true.mvome.reads2.fq.gz ]]; then
            # the input contig file or the reads are NOT empty
            bbmap.sh in=results/56_MES/reads/true.mvome.reads1.fq.gz in2=results/56_MES/reads/true.mvome.reads2.fq.gz             ref=results/56_MES/contigs/metagenome.contigs.filtered.fasta.gz             scafstats=results/56_MES/mappings/mvome_positive_vs_metagenome/scafstats.txt             rpkm=results/56_MES/mappings/mvome_positive_vs_metagenome/rpkm.txt             t=8             nodisk
        else
            # the input contig file IS empty
            touch results/56_MES/mappings/mvome_positive_vs_metagenome/scafstats.txt results/56_MES/mappings/mvome_positive_vs_metagenome/rpkm.txt
        fi      
        
Submitted job 119 with external jobid 'Submitted batch job 34850'.
[Sat Nov  5 02:21:07 2022]
Finished job 118.
137 of 171 steps (80%) done
[Sat Nov  5 02:32:49 2022]
Finished job 119.
138 of 171 steps (81%) done
[Sat Nov  5 02:48:30 2022]
Finished job 167.
139 of 171 steps (81%) done
Select jobs to execute...

[Sat Nov  5 02:48:30 2022]
rule viromeQC_virome:
    input: results/62_SRF/reads/true.virome.reads1.fq.gz, results/62_SRF/reads/true.virome.reads2.fq.gz
    output: results/62_SRF/viromeQC/virome_QC.tsv
    jobid: 169
    reason: Missing output files: results/62_SRF/viromeQC/virome_QC.tsv; Input files updated by another job: results/62_SRF/reads/true.virome.reads1.fq.gz, results/62_SRF/reads/true.virome.reads2.fq.gz
    wildcards: sample=62_SRF
    resources: tmpdir=/tmp, mem=100G, time=12:00:00, ntasks=8


        mkdir -p results/62_SRF/viromeQC

        if [ -s results/62_SRF/reads/true.virome.reads1.fq.gz ]; then
            python /home/dlueckin/bin/viromeqc/viromeQC.py -w environmental             --diamond_threads 8 --bowtie2_threads 8             -i results/62_SRF/reads/true.virome.reads1.fq.gz results/62_SRF/reads/true.virome.reads2.fq.gz             -o results/62_SRF/viromeQC/virome_QC.tsv
        else
            touch results/62_SRF/viromeQC/virome_QC.tsv
        fi
        
Submitted job 169 with external jobid 'Submitted batch job 34851'.

[Sat Nov  5 02:48:30 2022]
rule kaiju_virome:
    input: results/62_SRF/reads/true.virome.reads1.fq.gz, results/62_SRF/reads/true.virome.reads2.fq.gz
    output: results/62_SRF/kaiju/virome.out, results/62_SRF/kaiju/virome_summary.tsv
    jobid: 166
    reason: Missing output files: results/62_SRF/kaiju/virome_summary.tsv; Input files updated by another job: results/62_SRF/reads/true.virome.reads1.fq.gz, results/62_SRF/reads/true.virome.reads2.fq.gz
    wildcards: sample=62_SRF
    resources: tmpdir=/tmp, mem=250G, time=12:00:00, ntasks=8


        mkdir -p results/62_SRF/kaiju
        
        if [ -s results/62_SRF/reads/true.virome.reads1.fq.gz ]; then
            kaiju-multi -z 8             -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -f /bioinf/home/dlueckin/dbs/kaiju_db_nr/kaiju_db_nr.fmi             -i results/62_SRF/reads/true.virome.reads1.fq.gz             -j results/62_SRF/reads/true.virome.reads2.fq.gz             -o results/62_SRF/kaiju/virome.out

            kaiju2table -t /bioinf/home/dlueckin/dbs/kaiju_db_nr/nodes.dmp -n /bioinf/home/dlueckin/dbs/kaiju_db_nr/names.dmp             -r genus -o results/62_SRF/kaiju/virome_summary.tsv results/62_SRF/kaiju/virome.out
        else
            touch results/62_SRF/kaiju/virome.out results/62_SRF/kaiju/virome_summary.tsv
        fi
        
Submitted job 166 with external jobid 'Submitted batch job 34852'.
[Sat Nov  5 02:55:10 2022]
Finished job 132.
140 of 171 steps (82%) done
[Sat Nov  5 03:26:52 2022]
Finished job 135.
141 of 171 steps (82%) done
Select jobs to execute...

[Sat Nov  5 03:26:52 2022]
localrule mviest_plot:
    input: results/56_SRF/kaiju/mvome_summary.tsv, results/56_SRF/kaiju/virome_summary.tsv, results/56_SRF/viromeQC/mvome_QC.tsv, results/56_SRF/viromeQC/virome_QC.tsv, results/56_SRF/contig_summary_56_SRF.tsv, results/56_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt
    output: results/56_SRF/56_SRF_mviest_plot.png, results/56_SRF/56_SRF_mviest_summary.tsv
    jobid: 120
    reason: Missing output files: results/56_SRF/56_SRF_mviest_plot.png, results/56_SRF/56_SRF_mviest_summary.tsv; Input files updated by another job: results/56_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt, results/56_SRF/kaiju/mvome_summary.tsv, results/56_SRF/viromeQC/mvome_QC.tsv, results/56_SRF/contig_summary_56_SRF.tsv, results/56_SRF/kaiju/virome_summary.tsv, results/56_SRF/viromeQC/virome_QC.tsv
    wildcards: sample=56_SRF
    resources: tmpdir=/tmp


        Rscript scripts/mviest_plot.R         results/56_SRF/kaiju/mvome_summary.tsv results/56_SRF/kaiju/virome_summary.tsv         results/56_SRF/viromeQC/mvome_QC.tsv results/56_SRF/viromeQC/virome_QC.tsv         results/56_SRF/contig_summary_56_SRF.tsv         results/56_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt         results/56_SRF/56_SRF_mviest_plot.png
        
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
Selecting by Reads
Selecting by Reads
Selecting by total enrichmnet score
Selecting by total enrichmnet score
[Sat Nov  5 03:27:10 2022]
Finished job 120.
142 of 171 steps (83%) done
[Sat Nov  5 04:03:34 2022]
Finished job 166.
143 of 171 steps (84%) done
[Sat Nov  5 04:05:14 2022]
Finished job 169.
144 of 171 steps (84%) done
Select jobs to execute...

[Sat Nov  5 04:05:14 2022]
localrule mviest_plot:
    input: results/62_SRF/kaiju/mvome_summary.tsv, results/62_SRF/kaiju/virome_summary.tsv, results/62_SRF/viromeQC/mvome_QC.tsv, results/62_SRF/viromeQC/virome_QC.tsv, results/62_SRF/contig_summary_62_SRF.tsv, results/62_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt
    output: results/62_SRF/62_SRF_mviest_plot.png, results/62_SRF/62_SRF_mviest_summary.tsv
    jobid: 154
    reason: Missing output files: results/62_SRF/62_SRF_mviest_summary.tsv, results/62_SRF/62_SRF_mviest_plot.png; Input files updated by another job: results/62_SRF/contig_summary_62_SRF.tsv, results/62_SRF/kaiju/virome_summary.tsv, results/62_SRF/viromeQC/virome_QC.tsv, results/62_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt, results/62_SRF/viromeQC/mvome_QC.tsv, results/62_SRF/kaiju/mvome_summary.tsv
    wildcards: sample=62_SRF
    resources: tmpdir=/tmp


        Rscript scripts/mviest_plot.R         results/62_SRF/kaiju/mvome_summary.tsv results/62_SRF/kaiju/virome_summary.tsv         results/62_SRF/viromeQC/mvome_QC.tsv results/62_SRF/viromeQC/virome_QC.tsv         results/62_SRF/contig_summary_62_SRF.tsv         results/62_SRF/mappings/mvome_positive_vs_metagenome/scafstats.txt         results/62_SRF/62_SRF_mviest_plot.png
        
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
Selecting by Reads
Selecting by Reads
Selecting by total enrichmnet score
Selecting by total enrichmnet score
[Sat Nov  5 04:05:36 2022]
Finished job 154.
145 of 171 steps (85%) done
[Sat Nov  5 04:54:57 2022]
Finished job 104.
146 of 171 steps (85%) done
[Sat Nov  5 07:15:46 2022]
Finished job 117.
147 of 171 steps (86%) done
Select jobs to execute...

[Sat Nov  5 07:15:46 2022]
localrule mviest_plot:
    input: results/56_MES/kaiju/mvome_summary.tsv, results/56_MES/kaiju/virome_summary.tsv, results/56_MES/viromeQC/mvome_QC.tsv, results/56_MES/viromeQC/virome_QC.tsv, results/56_MES/contig_summary_56_MES.tsv, results/56_MES/mappings/mvome_positive_vs_metagenome/scafstats.txt
    output: results/56_MES/56_MES_mviest_plot.png, results/56_MES/56_MES_mviest_summary.tsv
    jobid: 103
    reason: Missing output files: results/56_MES/56_MES_mviest_summary.tsv, results/56_MES/56_MES_mviest_plot.png; Input files updated by another job: results/56_MES/viromeQC/virome_QC.tsv, results/56_MES/contig_summary_56_MES.tsv, results/56_MES/kaiju/mvome_summary.tsv, results/56_MES/viromeQC/mvome_QC.tsv, results/56_MES/mappings/mvome_positive_vs_metagenome/scafstats.txt, results/56_MES/kaiju/virome_summary.tsv
    wildcards: sample=56_MES
    resources: tmpdir=/tmp


        Rscript scripts/mviest_plot.R         results/56_MES/kaiju/mvome_summary.tsv results/56_MES/kaiju/virome_summary.tsv         results/56_MES/viromeQC/mvome_QC.tsv results/56_MES/viromeQC/virome_QC.tsv         results/56_MES/contig_summary_56_MES.tsv         results/56_MES/mappings/mvome_positive_vs_metagenome/scafstats.txt         results/56_MES/56_MES_mviest_plot.png
        
Activating conda environment: /home/dlueckin/envs/f0661911c8f8fcc4fdcd06216d834fa1
Selecting by Reads
Selecting by Reads
Selecting by total enrichmnet score
Selecting by total enrichmnet score
[Sat Nov  5 07:16:04 2022]
Finished job 103.
148 of 171 steps (87%) done
Exiting because a job execution failed. Look above for error message
Complete log: /home/dlueckin/projects/mvome_pipeline/mviest/.snakemake/log/2022-11-04T131920.966692.snakemake.log
